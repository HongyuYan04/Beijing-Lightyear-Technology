{"remainingRequest":"E:\\Java Program\\JP\\Program\\vue\\node_modules\\thread-loader\\dist\\cjs.js!E:\\Java Program\\JP\\Program\\vue\\node_modules\\babel-loader\\lib\\index.js!E:\\Java Program\\JP\\Program\\vue\\src\\router\\index.js","dependencies":[{"path":"E:\\Java Program\\JP\\Program\\vue\\src\\router\\index.js","mtime":1680769952000},{"path":"E:\\Java Program\\JP\\Program\\vue\\babel.config.js","mtime":1680769952000},{"path":"E:\\Java Program\\JP\\Program\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Java Program\\JP\\Program\\vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Java Program\\JP\\Program\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1750555620000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZm9yLWVhY2guanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7IC8vIOW8leWFpXZ1ZQppbXBvcnQgVnVlUm91dGVyIGZyb20gJ3Z1ZS1yb3V0ZXInOyAvLyDlvJXlhaV2dWUtcm91dGVyCmltcG9ydCBzdG9yZSBmcm9tICcuLi9zdG9yZSc7CmltcG9ydCB7IGdldFN0YWZmTWVudSB9IGZyb20gJy4uL2FwaS9tZW51JzsKCi8vIOino+WGs+W9k+mHjeWkjei3s+i9rOS4gOS4qui3r+eUseeahOaKpemUmemXrumimAovLyDojrflj5bljp/lnovlr7nosaHkuIrnmoRwdXNo5Ye95pWwCmNvbnN0IG9yaWdpbmFsUHVzaCA9IFZ1ZVJvdXRlci5wcm90b3R5cGUucHVzaDsKLy8g5L+u5pS55Y6f5Z6L5a+56LGh5Lit55qEcHVzaOaWueazlQpWdWVSb3V0ZXIucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiBwdXNoKGxvY2F0aW9uKSB7CiAgcmV0dXJuIG9yaWdpbmFsUHVzaC5jYWxsKHRoaXMsIGxvY2F0aW9uKS5jYXRjaChlcnIgPT4gZXJyKTsKfTsKVnVlLnVzZShWdWVSb3V0ZXIpOyAvLyDlhajlsYDlvJXlhaXot6/nlLEKCi8vIOmdmeaAgei3r+eUsQpjb25zdCByb3V0ZXMgPSBbewogIHBhdGg6ICcvbG9naW4nLAogIG5hbWU6ICdsb2dpbicsCiAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJy4uL3ZpZXdzL2xvZ2luJykKfV07CgovLyByb3V0ZXLlrp7kvosKY29uc3Qgcm91dGVyID0gbmV3IFZ1ZVJvdXRlcih7CiAgbW9kZTogJ2hpc3RvcnknLAogIC8vIOatpOaooeW8j+S4i++8jHVybOS4jeWHuueOsCIjIgogIHJvdXRlcyAvLyDorrDkvY/liY3pnaLnmoTlsZ7mgKfmmK9yb3V0ZXMo6Lev57q/Ke+8jOiAjOS4jeaYr3JvdXRlcnMo6Lev55Sx5ZmoKe+8jOS4jeeEtjxyb3V0ZXItdmlldz7nmoTlhoXlrrnkuI3kvJrmmL7npLoKfSk7CgovLyDph43nva7ot6/nlLEKZXhwb3J0IGNvbnN0IHJlc2V0Um91dGVyID0gKCkgPT4gewogIHJvdXRlci5tYXRjaGVyID0gbmV3IFZ1ZVJvdXRlcih7CiAgICBtb2RlOiAnaGlzdG9yeScsCiAgICByb3V0ZXMKICB9KTsKfTsKCi8vIOiuvue9ruWKqOaAgei3r+eUsSzliLfmlrDpobXpnaLvvIzkvJrph43nva7ot6/nlLEKZXhwb3J0IGNvbnN0IHNldER5bmFtaWNSb3V0ZSA9IG1lbnVMaXN0ID0+IHsKICBjb25zdCBkeW5hbWljUm91dGUgPSB7CiAgICBwYXRoOiAnLycsCiAgICBjb21wb25lbnQ6ICgpID0+IGltcG9ydCgnLi4vdmlld3MvTWFpbicpLAogICAgY2hpbGRyZW46IFtdCiAgfTsKICAvLyDmt7vliqDmt7vliqDoj5zljZXliLBkeW5hbWljUm91dGXnmoRjaGlsZHJlbuS4rQogIG1lbnVMaXN0LmZvckVhY2gobWVudSA9PiB7CiAgICBjb25zdCByb3V0ZSA9IHsKICAgICAgbmFtZTogbWVudS5jb2RlLAogICAgICBwYXRoOiBtZW51LmNvZGUsCiAgICAgIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KCcuLi92aWV3cy8nICsgbWVudS5jb2RlKSwKICAgICAgY2hpbGRyZW46IFtdCiAgICB9OwogICAgLy8g5Yik5pat5piv5ZCm5pyJ5a2Q6I+c5Y2VCiAgICBpZiAobWVudS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgIG1lbnUuY2hpbGRyZW4uZm9yRWFjaChzdWJNZW51ID0+IHsKICAgICAgICByb3V0ZS5jaGlsZHJlbi5wdXNoKHsKICAgICAgICAgIG5hbWU6IHN1Yk1lbnUuY29kZSwKICAgICAgICAgIHBhdGg6IHN1Yk1lbnUuY29kZSwKICAgICAgICAgIGNvbXBvbmVudDogKCkgPT4gaW1wb3J0KCcuLi92aWV3cy8nICsgbWVudS5jb2RlICsgJy8nICsgc3ViTWVudS5jb2RlKSwKICAgICAgICAgIGNoaWxkcmVuOiBbXQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICAgIGR5bmFtaWNSb3V0ZS5jaGlsZHJlbi5wdXNoKHJvdXRlKTsKICB9KTsKICBkeW5hbWljUm91dGUuY2hpbGRyZW4ucHVzaCgKICAvLyDmmKDlsITliLBob21l6aG16Z2iCiAgewogICAgcGF0aDogJy8nLAogICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJy4uL3ZpZXdzL2hvbWUnKQogIH0sCiAgLy8gNDA06aG16Z2iCiAgewogICAgcGF0aDogJyonLAogICAgY29tcG9uZW50OiAoKSA9PiBpbXBvcnQoJy4uL3ZpZXdzL2Vycm9yJykKICB9KTsKICByb3V0ZXIuYWRkUm91dGUoZHluYW1pY1JvdXRlKTsgLy8gYWRkUm91dGUoKeWPqui0n+i0o+a3u+WKoOi3r+eUse+8jOS9huS4jeWOu+mHjQp9Owpyb3V0ZXIuYmVmb3JlRWFjaCgodG8sIGZyb20sIG5leHQpID0+IHsKICAvLyDlpoLmnpzmnInljLnphY3nmoTot6/nlLHvvIzliJnnm7TmjqXot7PovawKICBpZiAodG8ubWF0Y2hlZC5sZW5ndGggPT09IDApIHsKICAgIC8vIOWmguaenHRva2Vu5a2Y5Zyo77yM5YiZ6K+05piO5bey57uP55m75b2V77yM5ZCm5YiZ5Zue5Yiw55m75b2V6aG16Z2iCiAgICBpZiAoc3RvcmUuc3RhdGUudG9rZW4udG9rZW4pIHsKICAgICAgLy8g6K+35rGC6I+c5Y2V5pWw5o2uCiAgICAgIGdldFN0YWZmTWVudSgpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIGNvbnN0IG1lbnVMaXN0ID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIC8vIOS7u+S9leS6uumDveWPr+iuv+mXruS4u+mhtQogICAgICAgICAgbWVudUxpc3QucHVzaCh7CiAgICAgICAgICAgIGlkOiAwLAogICAgICAgICAgICBjb2RlOiAnaG9tZScsCiAgICAgICAgICAgIG5hbWU6ICfpppbpobUnLAogICAgICAgICAgICBpY29uOiAncy1ob21lJywKICAgICAgICAgICAgcGF0aDogJy9ob21lJywKICAgICAgICAgICAgY2hpbGRyZW46IFtdCiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIOiuvue9ruWKqOaAgei3r+eUsQogICAgICAgICAgc2V0RHluYW1pY1JvdXRlKG1lbnVMaXN0KTsKICAgICAgICAgIC8vIOiuvue9ruiPnOWNlQogICAgICAgICAgc3RvcmUuY29tbWl0KCdtZW51L1NFVF9NRU5VJywgbWVudUxpc3QpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBuZXh0KHsKICAgICAgICBuYW1lOiAnbG9naW4nCiAgICAgIH0pOwogICAgfQogIH0KICBuZXh0KCk7Cn0pOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7IC8vIOWvueWkluaatOmcsg=="},{"version":3,"names":["Vue","VueRouter","store","getStaffMenu","originalPush","prototype","push","location","call","catch","err","use","routes","path","name","component","router","mode","resetRouter","matcher","setDynamicRoute","menuList","dynamicRoute","children","forEach","menu","route","code","length","subMenu","addRoute","beforeEach","to","from","next","matched","state","token","then","response","data","id","icon","commit"],"sources":["E:/Java Program/JP/Program/vue/src/router/index.js"],"sourcesContent":["import Vue from 'vue' // 引入vue\nimport VueRouter from 'vue-router' // 引入vue-router\nimport store from '../store'\nimport { getStaffMenu } from '../api/menu'\n\n// 解决当重复跳转一个路由的报错问题\n// 获取原型对象上的push函数\nconst originalPush = VueRouter.prototype.push\n// 修改原型对象中的push方法\nVueRouter.prototype.push = function push (location) {\n  return originalPush.call(this, location).catch((err) => err)\n}\n\nVue.use(VueRouter) // 全局引入路由\n\n// 静态路由\nconst routes = [{\n  path: '/login', name: 'login', component: () => import('../views/login')\n}]\n\n// router实例\nconst router = new VueRouter({\n  mode: 'history', // 此模式下，url不出现\"#\"\n  routes // 记住前面的属性是routes(路线)，而不是routers(路由器)，不然<router-view>的内容不会显示\n})\n\n// 重置路由\nexport const resetRouter = () => {\n  router.matcher = new VueRouter({\n    mode: 'history', routes\n  })\n}\n\n// 设置动态路由,刷新页面，会重置路由\nexport const setDynamicRoute = (menuList) => {\n  const dynamicRoute = {\n    path: '/',\n    component: () => import('../views/Main'),\n    children: []\n  }\n  // 添加添加菜单到dynamicRoute的children中\n  menuList.forEach((menu) => {\n    const route = {\n      name: menu.code,\n      path: menu.code,\n      component: () => import('../views/' + menu.code),\n      children: []\n    }\n    // 判断是否有子菜单\n    if (menu.children.length > 0) {\n      menu.children.forEach((subMenu) => {\n        route.children.push({\n          name: subMenu.code,\n          path: subMenu.code,\n          component: () => import('../views/' + menu.code + '/' + subMenu.code),\n          children: []\n        })\n      })\n    }\n    dynamicRoute.children.push(route)\n  })\n  dynamicRoute.children.push(\n    // 映射到home页面\n    {\n      path: '/',\n      component: () => import('../views/home')\n    },\n    // 404页面\n    {\n      path: '*',\n      component: () => import('../views/error')\n    })\n\n  router.addRoute(dynamicRoute) // addRoute()只负责添加路由，但不去重\n}\n\nrouter.beforeEach((to, from, next) => {\n  // 如果有匹配的路由，则直接跳转\n  if (to.matched.length === 0) {\n    // 如果token存在，则说明已经登录，否则回到登录页面\n    if (store.state.token.token) {\n      // 请求菜单数据\n      getStaffMenu().then(response => {\n        if (response.code === 200) {\n          const menuList = response.data\n          // 任何人都可访问主页\n          menuList.push({\n            id: 0,\n            code: 'home',\n            name: '首页',\n            icon: 's-home',\n            path: '/home',\n            children: []\n          })\n          // 设置动态路由\n          setDynamicRoute(menuList)\n          // 设置菜单\n          store.commit('menu/SET_MENU', menuList)\n        }\n      })\n    } else {\n      next({ name: 'login' })\n    }\n  }\n  next()\n})\n\nexport default router // 对外暴露\n"],"mappings":"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","ignoreList":[]}]}