{"remainingRequest":"E:\\Java Program\\JP\\Program\\vue\\node_modules\\babel-loader\\lib\\index.js!E:\\Java Program\\JP\\Program\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Java Program\\JP\\Program\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Java Program\\JP\\Program\\vue\\src\\views\\permission\\role\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\Java Program\\JP\\Program\\vue\\src\\views\\permission\\role\\index.vue","mtime":1697553078000},{"path":"E:\\Java Program\\JP\\Program\\vue\\babel.config.js","mtime":1680769952000},{"path":"E:\\Java Program\\JP\\Program\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Java Program\\JP\\Program\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1750555620000},{"path":"E:\\Java Program\\JP\\Program\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Java Program\\JP\\Program\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5tYXAuanMiOwppbXBvcnQgeyBhZGQsIGRlbGV0ZUJhdGNoLCBkZWxldGVPbmUsIGVkaXQsIGdldEV4cG9ydEFwaSwgZ2V0SW1wb3J0QXBpLCBnZXRMaXN0LCBnZXRNZW51LCBzZXRNZW51IH0gZnJvbSAnLi4vLi4vLi4vYXBpL3JvbGUnOwppbXBvcnQgeyBnZXRBbGwgfSBmcm9tICcuLi8uLi8uLi9hcGkvbWVudSc7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUm9sZScsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpYWxvZ0Zvcm06IHsKICAgICAgICB0eXBlOiAnYWRkJywKICAgICAgICAvLyBhZGTkuLrmlrDlop7vvIxlZGl05Li657yW6L6RCiAgICAgICAgaXNTaG93OiBmYWxzZSwKICAgICAgICBmb3JtRGF0YToge30KICAgICAgfSwKICAgICAgc2VhcmNoRm9ybTogewogICAgICAgIGZvcm1EYXRhOiB7fQogICAgICB9LAogICAgICBtZW51RGlhbG9nOiB7CiAgICAgICAgaXNTaG93OiBmYWxzZSwKICAgICAgICBtZW51RGF0YTogW10sCiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIGxhYmVsOiAnbmFtZScKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHRhYmxlOiB7CiAgICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgICBwYWdlQ29uZmlnOiB7CiAgICAgICAgICB0b3RhbDogMTAsCiAgICAgICAgICAvLyDorrDlvZXmgLvmlbAKICAgICAgICAgIGN1cnJlbnQ6IDEsCiAgICAgICAgICAvLyDotbflp4vpobUKICAgICAgICAgIHNpemU6IDEwIC8vIOavj+mhteWxleekuueahOiusOW9leaVsAogICAgICAgIH0KICAgICAgfSwKICAgICAgaWRzOiBbXSwKICAgICAgcm9sZUlkOiAwIC8vIOm7mOiupOS4ujAKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoJ3Rva2VuJywgWyd0b2tlbiddKSwKICAgIGhlYWRlcnMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdG9rZW46IHRoaXMudG9rZW4KICAgICAgfTsKICAgIH0sCiAgICAvLyDojrflj5blr7zlhaXmlbDmja7nmoTmjqXlj6MKICAgIGltcG9ydEFwaSgpIHsKICAgICAgcmV0dXJuIGdldEltcG9ydEFwaSgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g54K55Ye75paw5aKe5oyJ6ZKu77yM5by55Ye65a+56K+d5qGGCiAgICBoYW5kbGVBZGQoKSB7CiAgICAgIHRoaXMuZGlhbG9nRm9ybS5pc1Nob3cgPSB0cnVlOwogICAgICB0aGlzLmRpYWxvZ0Zvcm0udHlwZSA9ICdhZGQnOwogICAgICB0aGlzLmRpYWxvZ0Zvcm0uZm9ybURhdGEgPSB7fTsKICAgIH0sCiAgICBoYW5kbGVEZWxldGUoaWQpIHsKICAgICAgZGVsZXRlT25lKGlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKn++8gScpOwogICAgICAgICAgdGhpcy5sb2FkaW5nKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOWksei0pe+8gScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRGVsZXRlQmF0Y2goKSB7CiAgICAgIGRlbGV0ZUJhdGNoKHRoaXMuaWRzKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aJuemHj+WIoOmZpOaIkOWKn++8gScpOwogICAgICAgICAgdGhpcy5sb2FkaW5nKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aJuemHj+WIoOmZpOWksei0pe+8gScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRWRpdChyb3cpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtLmlzU2hvdyA9IHRydWU7CiAgICAgIHRoaXMuZGlhbG9nRm9ybS50eXBlID0gJ2VkaXQnOwogICAgICB0aGlzLmRpYWxvZ0Zvcm0uZm9ybURhdGEgPSByb3c7CiAgICB9LAogICAgY29uZmlybSgpIHsKICAgICAgLy8g6YCa6L+HdHlwZeadpeWIpOaWreaYr+aWsOWinui/mOaYr+e8lui+kQogICAgICBpZiAodGhpcy5kaWFsb2dGb3JtLnR5cGUgPT09ICdhZGQnKSB7CiAgICAgICAgYWRkKHRoaXMuZGlhbG9nRm9ybS5mb3JtRGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5re75Yqg5oiQ5Yqf77yBJyk7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybS5pc1Nob3cgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmt7vliqDlpLHotKXvvIEnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBlZGl0KHRoaXMuZGlhbG9nRm9ybS5mb3JtRGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+u5pS55oiQ5Yqf77yBJyk7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybS5pc1Nob3cgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkv67mlLnlpLHotKXvvIEnKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHNlYXJjaCgpIHsKICAgICAgdGhpcy5sb2FkaW5nKCk7CiAgICB9LAogICAgLy8g6YeN572u5pCc57Si6KGo5Y2VCiAgICByZXNldCgpIHsKICAgICAgdGhpcy5zZWFyY2hGb3JtLmZvcm1EYXRhID0ge307CiAgICAgIHRoaXMubG9hZGluZygpOwogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2Uoc2l6ZSkgewogICAgICB0aGlzLnRhYmxlLnBhZ2VDb25maWcuc2l6ZSA9IHNpemU7CiAgICAgIHRoaXMubG9hZGluZygpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UoY3VycmVudCkgewogICAgICB0aGlzLnRhYmxlLnBhZ2VDb25maWcuY3VycmVudCA9IGN1cnJlbnQ7CiAgICAgIHRoaXMubG9hZGluZygpOwogICAgfSwKICAgIGhhbmRsZVNlbGVjdGlvbkNoYW5nZShsaXN0KSB7CiAgICAgIHRoaXMuaWRzID0gbGlzdC5tYXAoaXRlbSA9PiBpdGVtLmlkKTsKICAgIH0sCiAgICAvLyDlsIbmlbDmja7muLLmn5PliLDmqKHmnb8KICAgIGxvYWRpbmcoKSB7CiAgICAgIGdldExpc3QoewogICAgICAgIGN1cnJlbnQ6IHRoaXMudGFibGUucGFnZUNvbmZpZy5jdXJyZW50LAogICAgICAgIHNpemU6IHRoaXMudGFibGUucGFnZUNvbmZpZy5zaXplLAogICAgICAgIG5hbWU6IHRoaXMuc2VhcmNoRm9ybS5mb3JtRGF0YS5uYW1lCiAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMudGFibGUudGFibGVEYXRhID0gcmVzcG9uc2UuZGF0YS5saXN0OwogICAgICAgICAgdGhpcy50YWJsZS5wYWdlQ29uZmlnLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXNwb25zZS5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOWvvOWHuuaVsOaNrgogICAgZXhwb3J0RGF0YSgpIHsKICAgICAgd2luZG93Lm9wZW4oZ2V0RXhwb3J0QXBpKCkpOwogICAgfSwKICAgIGhhbmRsZUltcG9ydFN1Y2Nlc3MocmVzcG9uc2UpIHsKICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5pWw5o2u5a+85YWl5oiQ5Yqf77yBJyk7CiAgICAgICAgdGhpcy5sb2FkaW5nKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5pWw5o2u5a+85YWl5aSx6LSl77yBJyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDpgInmi6noj5zljZUKICAgIHNlbGVjdE1lbnUoaWQpIHsKICAgICAgdGhpcy5tZW51RGlhbG9nLmlzU2hvdyA9IHRydWU7CiAgICAgIHRoaXMucm9sZUlkID0gaWQ7CiAgICAgIC8vIOiOt+WPluaJgOacieiPnOWNle+8jOW5tuWwhuatpOinkuiJsuaJgOmAieaLqeeahOiPnOWNleWLvumAieS4igogICAgICBnZXRBbGwoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLm1lbnVEaWFsb2cubWVudURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgZ2V0TWVudSh0aGlzLnJvbGVJZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICBjb25zdCBsZWFmS2V5cyA9IFtdOyAvLyDojrflj5blj7blrZDoioLngrnnmoRrZXkKICAgICAgICAgICAgICByZXNwb25zZS5kYXRhLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgICAgICAgICAvLyDliKTmlq3oioLngrnmmK/lkKblrZjlnKgKICAgICAgICAgICAgICAgIGlmICh0aGlzLiRyZWZzLnRyZWUuZ2V0Tm9kZShpdGVtLm1lbnVJZCkpIHsKICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJHJlZnMudHJlZS5nZXROb2RlKGl0ZW0ubWVudUlkKS5pc0xlYWYpIHsKICAgICAgICAgICAgICAgICAgICBsZWFmS2V5cy5wdXNoKGl0ZW0ubWVudUlkKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoaXMuJHJlZnMudHJlZS5zZXRDaGVja2VkS2V5cyhsZWFmS2V5cyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W5pWw5o2u5aSx6LSl77yBJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bmlbDmja7lpLHotKXvvIEnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOiuvue9ruiPnOWNlQogICAgaGFuZGxlU2V0TWVudSgpIHsKICAgICAgLy8g6YCJ5Lit55qE5ZKM5Y2K6YCJ5Lit55qE6IqC54K56L+b6KGM5ZCI5bm2CiAgICAgIHNldE1lbnUodGhpcy5yb2xlSWQsIHRoaXMuJHJlZnMudHJlZS5nZXRDaGVja2VkS2V5cygpLmNvbmNhdCh0aGlzLiRyZWZzLnRyZWUuZ2V0SGFsZkNoZWNrZWRLZXlzKCkpKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLm1lbnVEaWFsb2cuaXNTaG93ID0gZmFsc2U7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+iuvue9ruiPnOWNleaIkOWKn++8gScpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCforr7nva7oj5zljZXlpLHotKXvvIEnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZGluZygpOwogIH0KfTs="},{"version":3,"names":["add","deleteBatch","deleteOne","edit","getExportApi","getImportApi","getList","getMenu","setMenu","getAll","mapState","name","data","dialogForm","type","isShow","formData","searchForm","menuDialog","menuData","props","label","table","tableData","pageConfig","total","current","size","ids","roleId","computed","headers","token","importApi","methods","handleAdd","handleDelete","id","then","response","code","$message","success","loading","error","handleDeleteBatch","handleEdit","row","confirm","search","reset","handleSizeChange","handleCurrentChange","handleSelectionChange","list","map","item","message","exportData","window","open","handleImportSuccess","selectMenu","leafKeys","forEach","$refs","tree","getNode","menuId","isLeaf","push","setCheckedKeys","handleSetMenu","getCheckedKeys","concat","getHalfCheckedKeys","created"],"sources":["src/views/permission/role/index.vue"],"sourcesContent":["<template>\n  <div class=\"manage\">\n    <el-dialog\n      :title=\"dialogForm.type === 'add' ? '新增角色' : '更新角色'\"\n      :visible.sync=\"dialogForm.isShow\"\n    >\n      <el-form ref=\"form\" label-width=\"100px\" :model=\"dialogForm.formData\" size=\"mini\">\n        <el-form-item label-width=\"40px\" style=\"margin-bottom:4px \">\n          <el-form-item label=\"编号\" style=\"display:inline-block\" prop=\"code\">\n            <el-input\n              placeholder=\"请输入编号\"\n              v-model.trim=\"dialogForm.formData.code\"\n            />\n          </el-form-item>\n          <el-form-item label=\"职称\" style=\"display:inline-block\" prop=\"name\">\n            <el-input\n              placeholder=\"请输入职称\"\n              v-model.trim=\"dialogForm.formData.name\"\n            />\n          </el-form-item>\n        </el-form-item>\n        <el-form-item label=\"备注\" label-width=\"140px\" style=\"width:450px\" prop=\"remark\">\n          <el-input\n            type=\"textarea\"\n            placeholder=\"请输入\"\n            v-model.trim=\"dialogForm.formData.remark\"\n            :autosize=\"{ minRows: 2, maxRows: 4}\"\n            maxlength=\"100\"\n            show-word-limit\n          />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogForm.isShow = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirm\">确定</el-button>\n      </div>\n    </el-dialog>\n    <el-dialog title=\"菜单分配\" :visible.sync=\"menuDialog.isShow\">\n      <el-tree\n        ref=\"tree\"\n        :props=\"menuDialog.props\"\n        :data=\"menuDialog.menuData\"\n        node-key=\"id\"\n        show-checkbox\n        default-expand-all>\n        <span class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\n        <span><i :class=\"'el-icon-'+data.icon\"/> {{ data.name }}</span>\n        </span>\n      </el-tree>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"menuDialog.isShow = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"handleSetMenu\">确定</el-button>\n      </div>\n    </el-dialog>\n\n    <!---------------------------------- 导入导出等 ---------------------------------->\n    <div style=\"margin-bottom: 10px\">\n      <el-upload :action=\"importApi\" :headers=\"headers\" accept=\"xlsx\" :show-file-list=\"false\"\n                 :on-success=\"handleImportSuccess\" :multiple=\"false\"\n                 style=\"display:inline-block;\">\n        <el-button type=\"success\" size=\"mini\"\n        >导入 <i class=\"el-icon-bottom\"></i>\n        </el-button>\n      </el-upload>\n      <el-button type=\"warning\" size=\"mini\" @click=\"exportData\" style=\"margin-left: 10px\"\n      >导出 <i class=\"el-icon-top\"></i>\n      </el-button>\n      <el-button type=\"primary\" @click=\"handleAdd\" size=\"mini\"\n      >新增 <i class=\"el-icon-circle-plus-outline\"></i>\n      </el-button>\n      <el-popconfirm\n        style=\"margin-left: 10px\"\n        confirm-button-text='确定'\n        cancel-button-text='我再想想'\n        icon=\"el-icon-info\"\n        icon-color=\"red\"\n        title=\"你确定删除吗？\"\n        @confirm=\"handleDeleteBatch\"\n      >\n        <el-button type=\"danger\" size=\"mini\" slot=\"reference\"\n        >批量删除 <i class=\"el-icon-remove-outline\"></i>\n        </el-button>\n      </el-popconfirm>\n    </div>\n\n    <!---------------------------------- 搜索 ---------------------------------->\n    <div class=\"manage-header\">\n      <el-form label-width=\"auto\" :model=\"searchForm.formData\"\n               :inline=\"true\" size=\"mini\">\n        <el-form-item label=\"职称\" prop=\"name\">\n          <el-input\n            placeholder=\"请输入职称\"\n            v-model.trim=\"searchForm.formData.name\"\n            prefix-icon=\"el-icon-search\"\n          />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"search\" size=\"mini\">搜索 <i class=\"el-icon-search\"/></el-button>\n          <el-button type=\"danger\" @click=\"reset\" size=\"mini\">重置 <i class=\"el-icon-refresh-left\"/></el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <!-------------------------- 数据表格 ------------------>\n    <div class=\"common-table\">\n      <el-table\n        :data=\"table.tableData\"\n        height=\"85%\"\n        border\n        stripe\n        row-key=\"id\"\n        :header-cell-style=\"{background: '#eef1f6',color: '#606266',\n        textAlign:'center',fontWeight:'bold',borderWidth:'3px'}\"\n        @selection-change=\"handleSelectionChange\"\n      >\n        <el-table-column type=\"selection\" width=\"50\" align=\"center\"/>\n        <el-table-column prop=\"code\" label=\"编号\" min-width=\"80\" align=\"center\"/>\n        <el-table-column prop=\"name\" label=\"职称\" min-width=\"80\" align=\"center\"/>\n        <el-table-column prop=\"remark\" label=\"备注\" min-width=\"200\" align=\"center\"/>\n        <el-table-column label=\"操作\" width=\"280\" fixed=\"right\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" type=\"primary\" @click=\"handleEdit(scope.row)\"\n            >编辑 <i class=\"el-icon-edit\"></i\n            ></el-button>\n            <el-popconfirm\n              style=\"margin-left:10px;margin-right:10px\"\n              confirm-button-text='确定'\n              cancel-button-text='我再想想'\n              icon=\"el-icon-info\"\n              icon-color=\"red\"\n              title=\"你确定删除吗？\"\n              @confirm=\"handleDelete(scope.row.id)\"\n            >\n              <el-button size=\"mini\" type=\"danger\" slot=\"reference\"\n              >删除 <i class=\"el-icon-remove-outline\"></i\n              ></el-button>\n            </el-popconfirm>\n            <el-button type=\"warning\" @click=\"selectMenu(scope.row.id)\">分配菜单 <i class=\"el-icon-menu\"/></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        class=\"pager\"\n        layout=\"total,sizes,prev,pager,next,jumper\"\n        :page-size=\"table.pageConfig.size ? table.pageConfig.size : 10\"\n        :page-sizes=\"[5, 10, 15, 20]\"\n        :total=\"table.pageConfig.total\"\n        :current-page.sync=\"table.pageConfig.current\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n      ></el-pagination>\n    </div>\n  </div>\n</template>\n<script>\nimport {\n  add,\n  deleteBatch,\n  deleteOne,\n  edit,\n  getExportApi,\n  getImportApi,\n  getList,\n  getMenu,\n  setMenu\n} from '../../../api/role'\n\nimport { getAll } from '../../../api/menu'\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'Role',\n  data () {\n    return {\n      dialogForm: {\n        type: 'add', // add为新增，edit为编辑\n        isShow: false,\n        formData: {}\n      },\n      searchForm: {\n        formData: {}\n      },\n      menuDialog: {\n        isShow: false,\n        menuData: [],\n        props: {\n          label: 'name'\n        }\n      },\n      table: {\n        tableData: [],\n        pageConfig: {\n          total: 10, // 记录总数\n          current: 1, // 起始页\n          size: 10 // 每页展示的记录数\n        }\n      },\n      ids: [],\n      roleId: 0 // 默认为0\n    }\n  },\n  computed: {\n    ...mapState('token', ['token']),\n    headers () {\n      return { token: this.token }\n    },\n    // 获取导入数据的接口\n    importApi () {\n      return getImportApi()\n    }\n  },\n  methods: {\n    // 点击新增按钮，弹出对话框\n    handleAdd () {\n      this.dialogForm.isShow = true\n      this.dialogForm.type = 'add'\n      this.dialogForm.formData = {}\n    },\n    handleDelete (id) {\n      deleteOne(id).then(\n        response => {\n          if (response.code === 200) {\n            this.$message.success('删除成功！')\n            this.loading()\n          } else {\n            this.$message.error('删除失败！')\n          }\n        }\n      )\n    },\n    handleDeleteBatch () {\n      deleteBatch(this.ids).then(response => {\n        if (response.code === 200) {\n          this.$message.success('批量删除成功！')\n          this.loading()\n        } else {\n          this.$message.error('批量删除失败！')\n        }\n      })\n    },\n    handleEdit (row) {\n      this.dialogForm.isShow = true\n      this.dialogForm.type = 'edit'\n      this.dialogForm.formData = row\n    },\n    confirm () {\n      // 通过type来判断是新增还是编辑\n      if (this.dialogForm.type === 'add') {\n        add(this.dialogForm.formData).then((response) => {\n          if (response.code === 200) {\n            this.$message.success('添加成功！')\n            this.dialogForm.isShow = false\n            this.loading()\n          } else {\n            this.$message.error('添加失败！')\n          }\n        })\n      } else {\n        edit(this.dialogForm.formData).then((response) => {\n          if (response.code === 200) {\n            this.$message.success('修改成功！')\n            this.dialogForm.isShow = false\n            this.loading()\n          } else {\n            this.$message.error('修改失败！')\n          }\n        })\n      }\n    },\n    search () {\n      this.loading()\n    },\n    // 重置搜索表单\n    reset () {\n      this.searchForm.formData = {}\n      this.loading()\n    },\n    handleSizeChange (size) {\n      this.table.pageConfig.size = size\n      this.loading()\n    },\n    handleCurrentChange (current) {\n      this.table.pageConfig.current = current\n      this.loading()\n    },\n    handleSelectionChange (list) {\n      this.ids = list.map(item => item.id)\n    },\n    // 将数据渲染到模板\n    loading () {\n      getList({\n        current: this.table.pageConfig.current,\n        size: this.table.pageConfig.size,\n        name: this.searchForm.formData.name\n      }).then(response => {\n        if (response.code === 200) {\n          this.table.tableData = response.data.list\n          this.table.pageConfig.total = response.data.total\n        } else {\n          this.$message.error(response.message)\n        }\n      })\n    },\n    // 导出数据\n    exportData () {\n      window.open(getExportApi())\n    },\n    handleImportSuccess (response) {\n      if (response.code === 200) {\n        this.$message.success('数据导入成功！')\n        this.loading()\n      } else {\n        this.$message.error('数据导入失败！')\n      }\n    },\n    // 选择菜单\n    selectMenu (id) {\n      this.menuDialog.isShow = true\n      this.roleId = id\n      // 获取所有菜单，并将此角色所选择的菜单勾选上\n      getAll().then(response => {\n        if (response.code === 200) {\n          this.menuDialog.menuData = response.data\n          getMenu(this.roleId).then(response => {\n            if (response.code === 200) {\n              const leafKeys = [] // 获取叶子节点的key\n              response.data.forEach(item => {\n                // 判断节点是否存在\n                if (this.$refs.tree.getNode(item.menuId)) {\n                  if (this.$refs.tree.getNode(item.menuId).isLeaf) {\n                    leafKeys.push(item.menuId)\n                  }\n                }\n              })\n              this.$refs.tree.setCheckedKeys(leafKeys)\n            } else {\n              this.$message.error('获取数据失败！')\n            }\n          })\n        } else {\n          this.$message.error('获取数据失败！')\n        }\n      })\n    },\n    // 设置菜单\n    handleSetMenu () {\n      // 选中的和半选中的节点进行合并\n      setMenu(this.roleId, this.$refs.tree.getCheckedKeys().concat(this.$refs.tree.getHalfCheckedKeys())).then(\n        response => {\n          if (response.code === 200) {\n            this.menuDialog.isShow = false\n            this.$message.success('设置菜单成功！')\n          } else {\n            this.$message.error('设置菜单失败！')\n          }\n        })\n    }\n  },\n  created () {\n    this.loading()\n  }\n}\n</script>\n"],"mappings":"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","ignoreList":[]}]}