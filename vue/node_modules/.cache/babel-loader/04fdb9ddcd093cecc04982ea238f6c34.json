{"remainingRequest":"D:\\闲鱼卖品\\文件\\上架\\大号\\14-SpringBoot+Vue人力资源管理系统\\14-SpringBoot+Vue人力资源管理系统\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\闲鱼卖品\\文件\\上架\\大号\\14-SpringBoot+Vue人力资源管理系统\\14-SpringBoot+Vue人力资源管理系统\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\闲鱼卖品\\文件\\上架\\大号\\14-SpringBoot+Vue人力资源管理系统\\14-SpringBoot+Vue人力资源管理系统\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\闲鱼卖品\\文件\\上架\\大号\\14-SpringBoot+Vue人力资源管理系统\\14-SpringBoot+Vue人力资源管理系统\\vue\\src\\views\\money\\salary\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\闲鱼卖品\\文件\\上架\\大号\\14-SpringBoot+Vue人力资源管理系统\\14-SpringBoot+Vue人力资源管理系统\\vue\\src\\views\\money\\salary\\index.vue","mtime":1680769952000},{"path":"D:\\闲鱼卖品\\文件\\上架\\大号\\14-SpringBoot+Vue人力资源管理系统\\14-SpringBoot+Vue人力资源管理系统\\vue\\babel.config.js","mtime":1680769952000},{"path":"D:\\闲鱼卖品\\文件\\上架\\大号\\14-SpringBoot+Vue人力资源管理系统\\14-SpringBoot+Vue人力资源管理系统\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\闲鱼卖品\\文件\\上架\\大号\\14-SpringBoot+Vue人力资源管理系统\\14-SpringBoot+Vue人力资源管理系统\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\闲鱼卖品\\文件\\上架\\大号\\14-SpringBoot+Vue人力资源管理系统\\14-SpringBoot+Vue人力资源管理系统\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\闲鱼卖品\\文件\\上架\\大号\\14-SpringBoot+Vue人力资源管理系统\\14-SpringBoot+Vue人力资源管理系统\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0IHsgZ2V0RXhwb3J0QXBpLCBnZXRJbXBvcnRBcGksIGdldExpc3QsIHNldFNhbGFyeSB9IGZyb20gJy4uLy4uLy4uL2FwaS9zYWxhcnknOwppbXBvcnQgeyBnZXRJbnN1cmFuY2VCeVN0YWZmSWQgfSBmcm9tICcuLi8uLi8uLi9hcGkvaW5zdXJhbmNlJzsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgZ2V0QWxsRGVwdCB9IGZyb20gJ0AvYXBpL2RlcHQnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1NhbGFyeScsCiAgZGF0YSgpIHsKICAgIGNvbnN0IGNoZWNrU2FsYXJ5ID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodGhpcy5kaWFsb2dGb3JtLmZvcm1EYXRhLnRvdGFsU2FsYXJ5IDwgMCkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcign5pyA57uI5bel6LWE6Iez5bCR5bqU6K+l5aSn5LqOMCcpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoRm9ybTogewogICAgICAgIGRlcHRMaXN0OiBbXSwKICAgICAgICBmb3JtRGF0YToge30KICAgICAgfSwKICAgICAgZGlhbG9nRm9ybTogewogICAgICAgIGlzU2hvdzogZmFsc2UsCiAgICAgICAgZm9ybURhdGE6IHt9LAogICAgICAgIHJ1bGVzOiB7CiAgICAgICAgICBiYXNlU2FsYXJ5OiBbewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeWfuuehgOW3pei1hCcsCiAgICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgICAgfSwgewogICAgICAgICAgICB2YWxpZGF0b3I6IGNoZWNrU2FsYXJ5LAogICAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICAgIH1dCiAgICAgICAgfQogICAgICB9LAogICAgICB0YWJsZTogewogICAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgICAgcGFnZUNvbmZpZzogewogICAgICAgICAgdG90YWw6IDEwLAogICAgICAgICAgLy8g6K6w5b2V5oC75pWwCiAgICAgICAgICBjdXJyZW50OiAxLAogICAgICAgICAgLy8g6LW35aeL6aG1CiAgICAgICAgICBzaXplOiAxMCAvLyDmr4/pobXlsZXnpLrnmoTorrDlvZXmlbAKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1vbnRoOiAnJywKICAgICAgaW5zdXJhbmNlOiB7fQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSgndG9rZW4nLCBbJ3Rva2VuJ10pLAogICAgaGVhZGVycygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0b2tlbjogdGhpcy50b2tlbgogICAgICB9OwogICAgfSwKICAgIC8vIOiOt+WPluWvvOWFpeaVsOaNrueahOaOpeWPowogICAgaW1wb3J0QXBpKCkgewogICAgICByZXR1cm4gZ2V0SW1wb3J0QXBpKCk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgJ2RpYWxvZ0Zvcm0uZm9ybURhdGEuYmFzZVNhbGFyeSc6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5jYWxjdWxhdGVTYWxhcnkoKTsKICAgIH0sCiAgICAnZGlhbG9nRm9ybS5mb3JtRGF0YS5zdWJzaWR5JzogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLmNhbGN1bGF0ZVNhbGFyeSgpOwogICAgfSwKICAgICdkaWFsb2dGb3JtLmZvcm1EYXRhLmJvbnVzJzogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLmNhbGN1bGF0ZVNhbGFyeSgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g6K6h566X5bel6LWECiAgICBjYWxjdWxhdGVTYWxhcnkoKSB7CiAgICAgIHRoaXMuZGlhbG9nRm9ybS5mb3JtRGF0YS50b3RhbFNhbGFyeSA9IHRoaXMuZGlhbG9nRm9ybS5mb3JtRGF0YS5iYXNlU2FsYXJ5ICsgdGhpcy5kaWFsb2dGb3JtLmZvcm1EYXRhLnN1YnNpZHkgKyB0aGlzLmRpYWxvZ0Zvcm0uZm9ybURhdGEuYm9udXMgLSB0aGlzLmluc3VyYW5jZS5wZXJIb3VzZVBheSAtIHRoaXMuaW5zdXJhbmNlLnBlclNvY2lhbFBheSAtIHRoaXMuZGlhbG9nRm9ybS5mb3JtRGF0YS5sYXRlRGVkdWN0IC0gdGhpcy5kaWFsb2dGb3JtLmZvcm1EYXRhLmxlYXZlRWFybHlEZWR1Y3QgLSB0aGlzLmRpYWxvZ0Zvcm0uZm9ybURhdGEubGVhdmVEZWR1Y3QgLSB0aGlzLmRpYWxvZ0Zvcm0uZm9ybURhdGEuYWJzZW50ZWVpc21EZWR1Y3Q7CiAgICB9LAogICAgaGFuZGxlRWRpdChyb3cpIHsKICAgICAgZ2V0SW5zdXJhbmNlQnlTdGFmZklkKHJvdy5zdGFmZklkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLmluc3VyYW5jZSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm0uaXNTaG93ID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybS5mb3JtRGF0YSA9IHsKICAgICAgICAgICAgc3RhZmZJZDogcm93LnN0YWZmSWQsCiAgICAgICAgICAgIGJhc2VTYWxhcnk6IHJvdy5iYXNlU2FsYXJ5LAogICAgICAgICAgICBzdWJzaWR5OiByb3cuc3Vic2lkeSwKICAgICAgICAgICAgYm9udXM6IHJvdy5ib251cywKICAgICAgICAgICAgbW9udGg6IHRoaXMubW9udGgsCiAgICAgICAgICAgIGxhdGVEZWR1Y3Q6IHJvdy5sYXRlRGVkdWN0LAogICAgICAgICAgICBsZWF2ZURlZHVjdDogcm93LmxlYXZlRGVkdWN0LAogICAgICAgICAgICBsZWF2ZUVhcmx5RGVkdWN0OiByb3cubGVhdmVFYXJseURlZHVjdCwKICAgICAgICAgICAgYWJzZW50ZWVpc21EZWR1Y3Q6IHJvdy5hYnNlbnRlZWlzbURlZHVjdCwKICAgICAgICAgICAgcmVtYXJrOiByb3cucmVtYXJrCiAgICAgICAgICB9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7flhYjkuLrmraTlkZjlt6Xorr7nva7npL7kv53vvIEnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNvbmZpcm0oKSB7CiAgICAgIHRoaXMuJHJlZnMuZGlhbG9nRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICBzZXRTYWxhcnkodGhpcy5kaWFsb2dGb3JtLmZvcm1EYXRhKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5L+d5a2Y5oiQ5YqfJyk7CiAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtLmlzU2hvdyA9IGZhbHNlOwogICAgICAgICAgICAgIHRoaXMubG9hZGluZygpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S/neWtmOWksei0pScpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZShzaXplKSB7CiAgICAgIHRoaXMudGFibGUucGFnZUNvbmZpZy5zaXplID0gc2l6ZTsKICAgICAgdGhpcy5sb2FkaW5nKCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZShjdXJyZW50KSB7CiAgICAgIHRoaXMudGFibGUucGFnZUNvbmZpZy5jdXJyZW50ID0gY3VycmVudDsKICAgICAgdGhpcy5sb2FkaW5nKCk7CiAgICB9LAogICAgc2VhcmNoKCkgewogICAgICB0aGlzLmxvYWRpbmcoKTsKICAgIH0sCiAgICAvLyDph43nva7mkJzntKLooajljZUKICAgIHJlc2V0KCkgewogICAgICB0aGlzLnNlYXJjaEZvcm0uZm9ybURhdGEgPSB7fTsKICAgICAgdGhpcy5sb2FkaW5nKCk7CiAgICB9LAogICAgLy8g5bCG5pWw5o2u5riy5p+T5Yiw5qih5p2/CiAgICBsb2FkaW5nKCkgewogICAgICBnZXRBbGxEZXB0KCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgY29uc3QgbGlzdCA9IFtdOwogICAgICAgIHJlc3BvbnNlLmRhdGEuZm9yRWFjaChkZXB0ID0+IHsKICAgICAgICAgIGlmIChkZXB0LmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgZGVwdC5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgIGxpc3QucHVzaChkZXB0KTsKICAgICAgICAgICAgZGVwdC5jaGlsZHJlbi5mb3JFYWNoKHN1YkRlcHQgPT4gewogICAgICAgICAgICAgIGxpc3QucHVzaChzdWJEZXB0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLmRlcHRMaXN0ID0gbGlzdDsKICAgICAgfSk7CiAgICAgIGdldExpc3QoewogICAgICAgIGN1cnJlbnQ6IHRoaXMudGFibGUucGFnZUNvbmZpZy5jdXJyZW50LAogICAgICAgIHNpemU6IHRoaXMudGFibGUucGFnZUNvbmZpZy5zaXplLAogICAgICAgIG5hbWU6IHRoaXMuc2VhcmNoRm9ybS5mb3JtRGF0YS5uYW1lLAogICAgICAgIGRlcHRJZDogdGhpcy5zZWFyY2hGb3JtLmZvcm1EYXRhLmRlcHRJZCwKICAgICAgICBtb250aDogdGhpcy5zZWFyY2hGb3JtLmZvcm1EYXRhLm1vbnRoCiAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoaXMudGFibGUudGFibGVEYXRhID0gcmVzcG9uc2UuZGF0YS5saXN0OwogICAgICAgICAgdGhpcy50YWJsZS5wYWdlQ29uZmlnLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDsKICAgICAgICAgIHRoaXMubW9udGggPSByZXNwb25zZS5kYXRhLm1vbnRoOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3BvbnNlLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5a+85Ye65pWw5o2uCiAgICBleHBvcnREYXRhKCkgewogICAgICB3aW5kb3cub3BlbihnZXRFeHBvcnRBcGkodGhpcy5tb250aCkpOwogICAgfSwKICAgIGhhbmRsZUltcG9ydFN1Y2Nlc3MocmVzcG9uc2UpIHsKICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5pWw5o2u5a+85YWl5oiQ5Yqf77yBJyk7CiAgICAgICAgdGhpcy5sb2FkaW5nKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5pWw5o2u5a+85YWl5aSx6LSl77yBJyk7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWRpbmcoKTsKICB9Cn07"},{"version":3,"names":["getExportApi","getImportApi","getList","setSalary","getInsuranceByStaffId","mapState","getAllDept","name","data","checkSalary","rule","value","callback","dialogForm","formData","totalSalary","Error","searchForm","deptList","isShow","rules","baseSalary","required","message","trigger","validator","table","tableData","pageConfig","total","current","size","month","insurance","computed","headers","token","importApi","watch","dialogForm.formData.baseSalary","calculateSalary","dialogForm.formData.subsidy","dialogForm.formData.bonus","methods","subsidy","bonus","perHousePay","perSocialPay","lateDeduct","leaveEarlyDeduct","leaveDeduct","absenteeismDeduct","handleEdit","row","staffId","then","response","code","remark","$message","error","confirm","$refs","validate","valid","success","loading","handleSizeChange","handleCurrentChange","search","reset","list","forEach","dept","children","length","disabled","push","subDept","deptId","exportData","window","open","handleImportSuccess","created"],"sources":["src/views/money/salary/index.vue"],"sourcesContent":["<template>\n  <div class=\"manage\">\n    <el-dialog\n      title=\"工资\"\n      :visible.sync=\"dialogForm.isShow\"\n    >\n      <el-form ref=\"dialogForm\" label-width=\"150px\" size=\"mini\" :model=\"dialogForm.formData\"\n               :rules=\"dialogForm.rules\">\n        <el-form-item label=\"基本工资\" prop=\"baseSalary\">\n          <el-input-number v-model=\"dialogForm.formData.baseSalary\" :min=\"0\" style=\"width:48%\" :precision=\"3\"\n          />\n        </el-form-item>\n        <el-form-item label=\"生活补贴\" prop=\"subsidy\">\n          <el-input-number v-model=\"dialogForm.formData.subsidy\" :min=\"0\" style=\"width:48%\" :precision=\"3\"\n          />\n        </el-form-item>\n        <el-form-item label=\"奖金\" prop=\"bonus\">\n          <el-input-number v-model=\"dialogForm.formData.bonus\" :min=\"0\" style=\"width:48%\" :precision=\"3\"\n          />\n        </el-form-item>\n        <el-form-item label=\"扣款\" style=\"height:80px\">\n          <el-form-item style=\"height:30px\">\n            <el-form-item label=\"迟到\" label-width=\"60px\" style=\"display:inline-block\">\n              <el-input-number v-model=\"dialogForm.formData.lateDeduct\" :disabled=\"true\" :controls=\"false\"\n                               :precision=\"3\"/>\n            </el-form-item>\n            <el-form-item label=\"早退\" label-width=\"80px\" style=\"display:inline-block\">\n              <el-input-number v-model=\"dialogForm.formData.leaveEarlyDeduct\" :disabled=\"true\" :controls=\"false\"\n                               :precision=\"3\"/>\n            </el-form-item>\n          </el-form-item>\n          <el-form-item style=\"height:30px\">\n            <el-form-item label=\"旷工\" label-width=\"60px\" style=\"display:inline-block\">\n              <el-input-number v-model=\"dialogForm.formData.absenteeismDeduct\" :disabled=\"true\" :controls=\"false\"\n                               :precision=\"3\"/>\n            </el-form-item>\n            <el-form-item label=\"请假\" label-width=\"80px\" style=\"display:inline-block\">\n              <el-input-number v-model=\"dialogForm.formData.leaveDeduct\" :disabled=\"true\" :controls=\"false\"\n                               :precision=\"3\"/>\n            </el-form-item>\n          </el-form-item>\n        </el-form-item>\n        <el-form-item label=\"缴费\" style=\"height:30px\">\n          <el-form-item label=\"社保\" label-width=\"60px\" style=\"display:inline-block\">\n            <el-input-number\n              v-model=\"insurance.perSocialPay\"\n              :disabled=\"true\"\n              :controls=\"false\"\n              :precision=\"3\"\n            ></el-input-number>\n          </el-form-item>\n          <el-form-item label=\"公积金\" label-width=\"80px\" style=\"display:inline-block\">\n            <el-input-number\n              v-model=\"insurance.perHousePay\"\n              :disabled=\"true\"\n              :controls=\"false\"\n              :precision=\"3\"\n            ></el-input-number>\n          </el-form-item>\n        </el-form-item>\n        <el-form-item label=\"最终工资\" prop=\"totalSalary\">\n          <el-input-number v-model=\"dialogForm.formData.totalSalary\" style=\"width:48%\" :disabled=\"true\"\n                           :controls=\"false\" :precision=\"3\"/>\n        </el-form-item>\n        <el-form-item label=\"备注\">\n          <el-input type=\"textarea\" :autosize=\"{ minRows: 2, maxRows: 4}\"\n                    v-model.trim=\"dialogForm.formData.remark\"\n                    maxlength=\"100\"\n                    show-word-limit style=\"width:48%\"/>\n        </el-form-item>\n      </el-form>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogForm.isShow = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirm\">确定</el-button>\n      </div>\n    </el-dialog>\n    <!--操作-->\n    <div style=\"margin-bottom: 10px\">\n      <el-upload :action=\"importApi\" :headers=\"headers\" accept=\"xlsx\" :show-file-list=\"false\"\n                 :on-success=\"handleImportSuccess\" :multiple=\"false\"\n                 style=\"display:inline-block\">\n        <el-button type=\"success\" size=\"mini\"\n        >导入 <i class=\"el-icon-bottom\"></i>\n        </el-button>\n      </el-upload>\n      <el-button type=\"warning\" size=\"mini\" @click=\"exportData\" style=\"margin-left: 10px\"\n      >导出 <i class=\"el-icon-top\"></i>\n      </el-button>\n    </div>\n\n    <!------------------- 搜索 ------------------>\n    <div class=\"manage-header\">\n      <el-form label-width=\"auto\" :model=\"searchForm.formData\"\n               :inline=\"true\" size=\"mini\">\n        <el-form-item label=\"姓名\" prop=\"name\">\n          <el-input\n            placeholder=\"请输入姓名\"\n            v-model.trim=\"searchForm.formData.name\"\n            prefix-icon=\"el-icon-search\"\n          />\n        </el-form-item>\n        <el-form-item label=\"部门\" prop=\"deptId\">\n          <el-select\n            placeholder=\"请选择部门\"\n            v-model=\"searchForm.formData.deptId\"\n          >\n            <el-option\n              v-for=\"option in searchForm.deptList\"\n              :key=\"option.id\"\n              :label=\"option.name\"\n              :value=\"option.id\"\n              :disabled=\"option.disabled\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"月份\" prop=\"month\">\n          <el-date-picker\n            value-format='yyyyMM'\n            type=\"month\"\n            placeholder='请选择月份'\n            v-model=\"searchForm.formData.month\"\n          />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"search\" size=\"mini\">搜索 <i class=\"el-icon-search\"/></el-button>\n          <el-button type=\"danger\" @click=\"reset\" size=\"mini\">重置 <i class=\"el-icon-refresh-left\"/></el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <!--    数据表格-->\n    <div class=\"common-table\">\n      <el-table\n        :data=\"table.tableData\"\n        height=\"85%\"\n        border\n        stripe\n        row-key=\"id\"\n        :header-cell-style=\"{background: '#eef1f6',color: '#606266',\n        textAlign:'center',fontWeight:'bold',borderWidth:'3px'}\"\n      >\n        <el-table-column prop=\"code\" label=\"工号\" min-width=\"125\" align=\"center\"/>\n        <el-table-column prop=\"name\" label=\"姓名\" min-width=\"125\" align=\"center\"/>\n        <el-table-column prop=\"deptName\" label=\"部门\" min-width=\"125\" align=\"center\"/>\n        <el-table-column prop=\"phone\" label=\"电话\" min-width=\"125\" align=\"center\"/>\n        <el-table-column label=\"扣款项目\">\n          <el-table-column prop=\"lateDeduct\" label=\"迟到\" min-width=\"125\" align=\"center\"/>\n          <el-table-column prop=\"leaveEarlyDeduct\" label=\"早退\" min-width=\"125\" align=\"center\"/>\n          <el-table-column prop=\"absenteeismDeduct\" label=\"旷工\" min-width=\"125\" align=\"center\"/>\n          <el-table-column prop=\"leaveDeduct\" label=\"请假\" min-width=\"125\" align=\"center\"/>\n        </el-table-column>\n        <el-table-column label=\"缴纳项目\">\n          <el-table-column prop=\"housePay\" label=\"公积金\" min-width=\"125\" align=\"center\"/>\n          <el-table-column prop=\"socialPay\" label=\"社保\" min-width=\"125\" align=\"center\"/>\n        </el-table-column>\n        <el-table-column label=\"实发工资\">\n          <el-table-column prop=\"baseSalary\" label=\"基础工资\" min-width=\"125\" align=\"center\"/>\n          <el-table-column prop=\"subsidy\" label=\"生活补贴\" min-width=\"125\" align=\"center\"/>\n          <el-table-column prop=\"bonus\" label=\"奖金\" min-width=\"125\" align=\"center\"/>\n        </el-table-column>\n        <el-table-column prop=\"totalSalary\" label=\"最终工资\" min-width=\"125\" align=\"center\"/>\n        <el-table-column prop=\"remark\" label=\"备注\" min-width=\"200\" align=\"center\"/>\n        <el-table-column label=\"操作\" width=\"190\" fixed=\"right\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" type=\"primary\" @click=\"handleEdit(scope.row)\"\n            >明细 <i class=\"el-icon-edit\"></i\n            ></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        class=\"pager\"\n        layout=\"total,sizes,prev,pager,next,jumper\"\n        :page-size=\"table.pageConfig.size ? table.pageConfig.size : 10\"\n        :page-sizes=\"[5, 10, 15, 20]\"\n        :total=\"table.pageConfig.total\"\n        :current-page.sync=\"table.pageConfig.current\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n      ></el-pagination>\n    </div>\n  </div>\n</template>\n<script>\nimport { getExportApi, getImportApi, getList, setSalary } from '../../../api/salary'\nimport { getInsuranceByStaffId } from '../../../api/insurance'\nimport { mapState } from 'vuex'\nimport { getAllDept } from '@/api/dept'\n\nexport default {\n  name: 'Salary',\n  data () {\n    const checkSalary = (rule, value, callback) => {\n      if (this.dialogForm.formData.totalSalary < 0) {\n        callback(new Error('最终工资至少应该大于0'))\n      } else {\n        callback()\n      }\n    }\n    return {\n      searchForm: {\n        deptList: [],\n        formData: {}\n      },\n      dialogForm: {\n        isShow: false,\n        formData: {},\n        rules: {\n          baseSalary: [\n            { required: true, message: '请输入基础工资', trigger: 'blur' },\n            { validator: checkSalary, trigger: 'blur' }\n          ]\n        }\n      },\n      table: {\n        tableData: [],\n        pageConfig: {\n          total: 10, // 记录总数\n          current: 1, // 起始页\n          size: 10 // 每页展示的记录数\n        }\n      },\n      month: '',\n      insurance: {}\n    }\n  },\n  computed: {\n    ...mapState('token', ['token']),\n    headers () {\n      return { token: this.token }\n    },\n    // 获取导入数据的接口\n    importApi () {\n      return getImportApi()\n    }\n  },\n  watch: {\n    'dialogForm.formData.baseSalary': function () {\n      this.calculateSalary()\n    },\n    'dialogForm.formData.subsidy': function () {\n      this.calculateSalary()\n    },\n    'dialogForm.formData.bonus': function () {\n      this.calculateSalary()\n    }\n  },\n  methods: {\n    // 计算工资\n    calculateSalary () {\n      this.dialogForm.formData.totalSalary = this.dialogForm.formData.baseSalary +\n        this.dialogForm.formData.subsidy + this.dialogForm.formData.bonus -\n        this.insurance.perHousePay - this.insurance.perSocialPay - this.dialogForm.formData.lateDeduct -\n        this.dialogForm.formData.leaveEarlyDeduct -\n        this.dialogForm.formData.leaveDeduct - this.dialogForm.formData.absenteeismDeduct\n    },\n    handleEdit (row) {\n      getInsuranceByStaffId(row.staffId).then(response => {\n        if (response.code === 200) {\n          this.insurance = response.data\n          this.dialogForm.isShow = true\n          this.dialogForm.formData = {\n            staffId: row.staffId,\n            baseSalary: row.baseSalary,\n            subsidy: row.subsidy,\n            bonus: row.bonus,\n            month: this.month,\n            lateDeduct: row.lateDeduct,\n            leaveDeduct: row.leaveDeduct,\n            leaveEarlyDeduct: row.leaveEarlyDeduct,\n            absenteeismDeduct: row.absenteeismDeduct,\n            remark: row.remark\n          }\n        } else {\n          this.$message.error('请先为此员工设置社保！')\n        }\n      })\n    },\n    confirm () {\n      this.$refs.dialogForm.validate(valid => {\n        if (valid) {\n          setSalary(this.dialogForm.formData).then((response) => {\n            if (response.code === 200) {\n              this.$message.success('保存成功')\n              this.dialogForm.isShow = false\n              this.loading()\n            } else {\n              this.$message.error('保存失败')\n            }\n          })\n        } else {\n          return false\n        }\n      })\n    },\n    handleSizeChange (size) {\n      this.table.pageConfig.size = size\n      this.loading()\n    },\n    handleCurrentChange (current) {\n      this.table.pageConfig.current = current\n      this.loading()\n    },\n    search () {\n      this.loading()\n    },\n    // 重置搜索表单\n    reset () {\n      this.searchForm.formData = {}\n      this.loading()\n    },\n    // 将数据渲染到模板\n    loading () {\n      getAllDept().then(response => {\n        const list = []\n        response.data.forEach(dept => {\n          if (dept.children.length > 0) {\n            dept.disabled = true\n            list.push(dept)\n            dept.children.forEach(subDept => {\n              list.push(subDept)\n            })\n          }\n        })\n        this.searchForm.deptList = list\n      })\n      getList({\n        current: this.table.pageConfig.current,\n        size: this.table.pageConfig.size,\n        name: this.searchForm.formData.name,\n        deptId: this.searchForm.formData.deptId,\n        month: this.searchForm.formData.month\n      }).then(response => {\n        if (response.code === 200) {\n          this.table.tableData = response.data.list\n          this.table.pageConfig.total = response.data.total\n          this.month = response.data.month\n        } else {\n          this.$message.error(response.message)\n        }\n      })\n    },\n    // 导出数据\n    exportData () {\n      window.open(getExportApi(this.month))\n    },\n    handleImportSuccess (response) {\n      if (response.code === 200) {\n        this.$message.success('数据导入成功！')\n        this.loading()\n      } else {\n        this.$message.error('数据导入失败！')\n      }\n    }\n  },\n  created () {\n    this.loading()\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.common-table {\n  height: calc(100% - 62px);\n  background-color: white;\n  position: relative;\n\n  .pager {\n    position: absolute;\n    bottom: 20px;\n    right: 20px;\n  }\n}\n\n</style>\n"],"mappings":"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"}]}