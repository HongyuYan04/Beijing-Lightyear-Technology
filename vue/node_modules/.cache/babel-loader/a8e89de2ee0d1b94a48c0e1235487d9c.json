{"remainingRequest":"D:\\闲鱼卖品\\文件\\上架\\大号\\人力资源管理系统-16\\源码\\hrm\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\闲鱼卖品\\文件\\上架\\大号\\人力资源管理系统-16\\源码\\hrm\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\闲鱼卖品\\文件\\上架\\大号\\人力资源管理系统-16\\源码\\hrm\\vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\闲鱼卖品\\文件\\上架\\大号\\人力资源管理系统-16\\源码\\hrm\\vue\\src\\views\\system\\staff\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\闲鱼卖品\\文件\\上架\\大号\\人力资源管理系统-16\\源码\\hrm\\vue\\src\\views\\system\\staff\\index.vue","mtime":1680769952000},{"path":"D:\\闲鱼卖品\\文件\\上架\\大号\\人力资源管理系统-16\\源码\\hrm\\vue\\babel.config.js","mtime":1680769952000},{"path":"D:\\闲鱼卖品\\文件\\上架\\大号\\人力资源管理系统-16\\源码\\hrm\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\闲鱼卖品\\文件\\上架\\大号\\人力资源管理系统-16\\源码\\hrm\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\闲鱼卖品\\文件\\上架\\大号\\人力资源管理系统-16\\源码\\hrm\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\闲鱼卖品\\文件\\上架\\大号\\人力资源管理系统-16\\源码\\hrm\\vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IGFkZCwgZGVsZXRlQmF0Y2gsIGRlbGV0ZU9uZSwgZWRpdCwgZ2V0RXhwb3J0QXBpLCBnZXRJbXBvcnRBcGksIGdldExpc3QsIGdldFJvbGUsIHNldFJvbGUgfSBmcm9tICcuLi8uLi8uLi9hcGkvc3RhZmYnOwppbXBvcnQgeyBnZXRBbGwgfSBmcm9tICcuLi8uLi8uLi9hcGkvcm9sZSc7CmltcG9ydCB7IGdldEFsbERlcHQgfSBmcm9tICcuLi8uLi8uLi9hcGkvZGVwdCc7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU3RhZmYnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dGb3JtOiB7CiAgICAgICAgdHlwZTogJ2FkZCcsCiAgICAgICAgLy8gYWRk5Li65paw5aKe77yMZWRpdOS4uue8lui+kQogICAgICAgIGlzU2hvdzogZmFsc2UsCiAgICAgICAgZGVwdExpc3Q6IFtdLAogICAgICAgIGZvcm1EYXRhOiB7fQogICAgICB9LAogICAgICBzZWFyY2hGb3JtOiB7CiAgICAgICAgZGVwdExpc3Q6IFtdLAogICAgICAgIGZvcm1EYXRhOiB7fQogICAgICB9LAogICAgICByb2xlRGlhbG9nOiB7CiAgICAgICAgaXNTaG93OiBmYWxzZSwKICAgICAgICByb2xlRGF0YTogW10sCiAgICAgICAgY2hlY2tlZERhdGE6IFtdCiAgICAgIH0sCiAgICAgIHRhYmxlOiB7CiAgICAgICAgdGFibGVEYXRhOiBbXSwKICAgICAgICBwYWdlQ29uZmlnOiB7CiAgICAgICAgICB0b3RhbDogMTAsCiAgICAgICAgICAvLyDorrDlvZXmgLvmlbAKICAgICAgICAgIGN1cnJlbnQ6IDEsCiAgICAgICAgICAvLyDotbflp4vpobUKICAgICAgICAgIHNpemU6IDEwIC8vIOavj+mhteWxleekuueahOiusOW9leaVsAogICAgICAgIH0KICAgICAgfSwKICAgICAgaWRzOiBbXSwKICAgICAgc3RhZmZJZDogMCwKICAgICAgLy8g6buY6K6k5Li6MAogICAgICBzdWJEZXB0TGlzdDogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoJ3Rva2VuJywgWyd0b2tlbiddKSwKICAgIGhlYWRlcnMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgdG9rZW46IHRoaXMudG9rZW4KICAgICAgfTsKICAgIH0sCiAgICAvLyDojrflj5blr7zlhaXmlbDmja7nmoTmjqXlj6MKICAgIGltcG9ydEFwaSgpIHsKICAgICAgcmV0dXJuIGdldEltcG9ydEFwaSgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGVwdCgpIHsKICAgICAgLy8g6I635Y+W5omA5pyJ6YOo6ZeoCiAgICAgIGdldEFsbERlcHQoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zdCBsaXN0ID0gW107CiAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKGRlcHQgPT4gewogICAgICAgICAgaWYgKGRlcHQuY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICAgICAgICBkZXB0LmRpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgbGlzdC5wdXNoKGRlcHQpOwogICAgICAgICAgICBkZXB0LmNoaWxkcmVuLmZvckVhY2goc3ViRGVwdCA9PiB7CiAgICAgICAgICAgICAgbGlzdC5wdXNoKHN1YkRlcHQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICB0aGlzLmRpYWxvZ0Zvcm0uZGVwdExpc3QgPSBsaXN0OwogICAgICB9KTsKICAgIH0sCiAgICAvLyDngrnlh7vmlrDlop7mjInpkq7vvIzlvLnlh7rlr7nor53moYYKICAgIGhhbmRsZUFkZCgpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtLmlzU2hvdyA9IHRydWU7CiAgICAgIHRoaXMuZGlhbG9nRm9ybS50eXBlID0gJ2FkZCc7CiAgICAgIHRoaXMuZGlhbG9nRm9ybS5mb3JtRGF0YSA9IHt9OwogICAgICB0aGlzLmdldERlcHQoKTsKICAgIH0sCiAgICBoYW5kbGVEZWxldGUoaWQpIHsKICAgICAgZGVsZXRlT25lKGlkKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKn++8gScpOwogICAgICAgICAgdGhpcy5sb2FkaW5nKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WIoOmZpOWksei0pe+8gScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRGVsZXRlQmF0Y2goKSB7CiAgICAgIGRlbGV0ZUJhdGNoKHRoaXMuaWRzKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aJuemHj+WIoOmZpOaIkOWKn++8gScpOwogICAgICAgICAgdGhpcy5sb2FkaW5nKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aJuemHj+WIoOmZpOWksei0pe+8gScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRWRpdChyb3cpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtLmlzU2hvdyA9IHRydWU7CiAgICAgIHRoaXMuZGlhbG9nRm9ybS50eXBlID0gJ2VkaXQnOwogICAgICB0aGlzLmRpYWxvZ0Zvcm0uZm9ybURhdGEgPSByb3c7CiAgICAgIHRoaXMuZ2V0RGVwdCgpOwogICAgfSwKICAgIGNvbmZpcm0oKSB7CiAgICAgIC8vIOmAmui/h3R5cGXmnaXliKTmlq3mmK/mlrDlop7ov5jmmK/nvJbovpEKICAgICAgaWYgKHRoaXMuZGlhbG9nRm9ybS50eXBlID09PSAnYWRkJykgewogICAgICAgIGFkZCh0aGlzLmRpYWxvZ0Zvcm0uZm9ybURhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+a3u+WKoOaIkOWKn++8gScpOwogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm0uaXNTaG93ID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMubG9hZGluZygpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5re75Yqg5aSx6LSl77yBJyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWRpdCh0aGlzLmRpYWxvZ0Zvcm0uZm9ybURhdGEpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S/ruaUueaIkOWKn++8gScpOwogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm0uaXNTaG93ID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMubG9hZGluZygpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5L+u5pS55aSx6LSl77yBJyk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBzZWFyY2goKSB7CiAgICAgIHRoaXMubG9hZGluZygpOwogICAgfSwKICAgIC8vIOmHjee9ruaQnOe0ouihqOWNlQogICAgcmVzZXQoKSB7CiAgICAgIHRoaXMuc2VhcmNoRm9ybS5mb3JtRGF0YSA9IHt9OwogICAgICB0aGlzLmxvYWRpbmcoKTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKHNpemUpIHsKICAgICAgdGhpcy50YWJsZS5wYWdlQ29uZmlnLnNpemUgPSBzaXplOwogICAgICB0aGlzLmxvYWRpbmcoKTsKICAgIH0sCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKGN1cnJlbnQpIHsKICAgICAgdGhpcy50YWJsZS5wYWdlQ29uZmlnLmN1cnJlbnQgPSBjdXJyZW50OwogICAgICB0aGlzLmxvYWRpbmcoKTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UobGlzdCkgewogICAgICB0aGlzLmlkcyA9IGxpc3QubWFwKGl0ZW0gPT4gaXRlbS5pZCk7CiAgICB9LAogICAgaGFuZGxlU3RhdHVzQ2hhbmdlKHJvdykgewogICAgICBlZGl0KHJvdyk7CiAgICB9LAogICAgLy8g5Yqg6L295pWw5o2uCiAgICBsb2FkaW5nKCkgewogICAgICBnZXRBbGxEZXB0KCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgY29uc3QgbGlzdCA9IFtdOwogICAgICAgIHJlc3BvbnNlLmRhdGEuZm9yRWFjaChkZXB0ID0+IHsKICAgICAgICAgIGlmIChkZXB0LmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgZGVwdC5kaXNhYmxlZCA9IHRydWU7CiAgICAgICAgICAgIGxpc3QucHVzaChkZXB0KTsKICAgICAgICAgICAgZGVwdC5jaGlsZHJlbi5mb3JFYWNoKHN1YkRlcHQgPT4gewogICAgICAgICAgICAgIGxpc3QucHVzaChzdWJEZXB0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zZWFyY2hGb3JtLmRlcHRMaXN0ID0gbGlzdDsKICAgICAgfSk7CiAgICAgIGdldExpc3QoewogICAgICAgIGN1cnJlbnQ6IHRoaXMudGFibGUucGFnZUNvbmZpZy5jdXJyZW50LAogICAgICAgIHNpemU6IHRoaXMudGFibGUucGFnZUNvbmZpZy5zaXplCiAgICAgIH0sIHRoaXMuc2VhcmNoRm9ybS5mb3JtRGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy50YWJsZS50YWJsZURhdGEgPSByZXNwb25zZS5kYXRhLmxpc3Q7CiAgICAgICAgICB0aGlzLnRhYmxlLnBhZ2VDb25maWcudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlc3BvbnNlLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g5a+85Ye65pWw5o2uCiAgICBleHBvcnREYXRhKCkgewogICAgICB3aW5kb3cub3BlbihnZXRFeHBvcnRBcGkoKSk7CiAgICB9LAogICAgaGFuZGxlSW1wb3J0U3VjY2VzcyhyZXNwb25zZSkgewogICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmlbDmja7lr7zlhaXmiJDlip/vvIEnKTsKICAgICAgICB0aGlzLmxvYWRpbmcoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmlbDmja7lr7zlhaXlpLHotKXvvIEnKTsKICAgICAgfQogICAgfSwKICAgIHNlbGVjdFJvbGUoaWQpIHsKICAgICAgdGhpcy5zdGFmZklkID0gaWQ7CiAgICAgIHRoaXMucm9sZURpYWxvZy5pc1Nob3cgPSB0cnVlOwogICAgICBnZXRBbGwoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGlzLnJvbGVEaWFsb2cucm9sZURhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bop5LoibLmlbDmja7lpLHotKXvvIEnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBnZXRSb2xlKHRoaXMuc3RhZmZJZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5yb2xlRGlhbG9nLmNoZWNrZWREYXRhID0gcmVzcG9uc2UuZGF0YS5tYXAoaXRlbSA9PiBpdGVtLnJvbGVJZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluaVsOaNruWksei0pe+8gScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2V0Um9sZSgpIHsKICAgICAgc2V0Um9sZSh0aGlzLnN0YWZmSWQsIHRoaXMucm9sZURpYWxvZy5jaGVja2VkRGF0YSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5yb2xlRGlhbG9nLmlzU2hvdyA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfop5LoibLliIbphY3miJDlip/vvIEnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6KeS6Imy5YiG6YWN5aSx6LSl77yBJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWRpbmcoKTsKICB9Cn07"},{"version":3,"names":["add","deleteBatch","deleteOne","edit","getExportApi","getImportApi","getList","getRole","setRole","getAll","getAllDept","mapState","name","data","dialogForm","type","isShow","deptList","formData","searchForm","roleDialog","roleData","checkedData","table","tableData","pageConfig","total","current","size","ids","staffId","subDeptList","computed","headers","token","importApi","methods","getDept","then","response","list","forEach","dept","children","length","disabled","push","subDept","handleAdd","handleDelete","id","code","$message","success","loading","error","handleDeleteBatch","handleEdit","row","confirm","search","reset","handleSizeChange","handleCurrentChange","handleSelectionChange","map","item","handleStatusChange","message","exportData","window","open","handleImportSuccess","selectRole","roleId","handleSetRole","created"],"sources":["src/views/system/staff/index.vue"],"sourcesContent":["<template>\n  <div class=\"manage\">\n    <el-dialog\n      :title=\"dialogForm.type === 'add' ? '新增用户' : '更新用户'\"\n      :visible.sync=\"dialogForm.isShow\"\n    >\n      <el-form ref=\"form\" label-width=\"100px\" :model=\"dialogForm.formData\" size=\"mini\">\n        <el-form-item label-width=\"40px\" style=\"margin-bottom:4px \">\n          <el-form-item label=\"姓名\" style=\"display:inline-block;width:300px\" prop=\"name\">\n            <el-input\n              placeholder=\"请输入姓名\"\n              v-model.trim=\"dialogForm.formData.name\"\n            />\n          </el-form-item>\n          <el-form-item label=\"生日\" style=\"display:inline-block\" prop=\"birthday\">\n            <el-date-picker\n              type=\"date\"\n              value-format=\"yyyy-MM-dd\"\n              placeholder=\"请选择生日  \"\n              v-model=\"dialogForm.formData.birthday\"\n            />\n          </el-form-item>\n        </el-form-item>\n        <el-form-item label-width=\"40px\" style=\"margin-bottom:4px \">\n          <el-form-item label=\"部门\" style=\"display:inline-block\" prop=\"deptId\">\n            <el-select\n              placeholder=\"请选择部门\"\n              v-model=\"dialogForm.formData.deptId\"\n            >\n              <el-option\n                v-for=\"option in dialogForm.deptList\"\n                :key=\"option.id\"\n                :label=\"option.name\"\n                :value=\"option.id\"\n                :disabled=\"option.disabled\"\n              />\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"性别\" style=\"display:inline-block\" prop=\"gender\">\n            <el-select\n              placeholder=\"请选择员工性别\"\n              v-model=\"dialogForm.formData.gender\"\n            >\n              <el-option\n                value=\"男\"\n              />\n              <el-option\n                value=\"女\"\n              />\n            </el-select>\n          </el-form-item>\n        </el-form-item>\n\n        <el-form-item label=\"电话\" label-width=\"140px\" style=\"width: 340px\" prop=\"phone\">\n          <el-input\n            placeholder=\"请输入电话\"\n            v-model.trim=\"dialogForm.formData.phone\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"地址\" label-width=\"140px\" style=\"width: 450px\" prop=\"address\">\n          <el-input\n            placeholder=\"请输入地址\"\n            v-model.trim=\"dialogForm.formData.address\"\n          />\n        </el-form-item>\n\n        <el-form-item label=\"备注\" label-width=\"140px\" style=\"width:450px\" prop=\"remark\">\n          <el-input\n            type=\"textarea\"\n            placeholder=\"请输入\"\n            v-model.trim=\"dialogForm.formData.remark\"\n            :autosize=\"{ minRows: 2, maxRows: 4}\"\n            maxlength=\"100\"\n            show-word-limit\n          />\n        </el-form-item>\n      </el-form>\n\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogForm.isShow = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirm\">确定</el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog title=\"角色分配\" :visible.sync=\"roleDialog.isShow\">\n      <el-checkbox-group v-model=\"roleDialog.checkedData\">\n        <el-checkbox v-for=\"(item,index) in roleDialog.roleData\" :key=\"index\" :label=\"item.id\" style=\"margin: 10px\"\n                     border>{{ item.name }}\n        </el-checkbox>\n      </el-checkbox-group>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"roleDialog.isShow = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"handleSetRole\">确定</el-button>\n      </div>\n    </el-dialog>\n\n    <div style=\"margin-bottom: 10px\">\n      <el-upload :action=\"importApi\" :headers=\"headers\" accept=\"xlsx\" :show-file-list=\"false\"\n                 :on-success=\"handleImportSuccess\" :multiple=\"false\"\n                 style=\"display:inline-block;\">\n        <el-button type=\"success\" size=\"mini\"\n        >导入 <i class=\"el-icon-bottom\"></i>\n        </el-button>\n      </el-upload>\n      <el-button type=\"warning\" size=\"mini\" @click=\"exportData\" style=\"margin-left: 10px\"\n      >导出 <i class=\"el-icon-top\"></i>\n      </el-button>\n      <el-button type=\"primary\" @click=\"handleAdd\" size=\"mini\"\n      >新增 <i class=\"el-icon-circle-plus-outline\"></i>\n      </el-button>\n      <el-popconfirm\n        style=\"margin-left: 10px\"\n        confirm-button-text='确定'\n        cancel-button-text='我再想想'\n        icon=\"el-icon-info\"\n        icon-color=\"red\"\n        title=\"你确定删除吗？\"\n        @confirm=\"handleDeleteBatch\"\n      >\n        <el-button type=\"danger\" size=\"mini\" slot=\"reference\"\n        >批量删除 <i class=\"el-icon-remove-outline\"></i>\n        </el-button>\n      </el-popconfirm>\n\n    </div>\n\n    <!------------------------- 搜索 ------------------------------------>\n    <div class=\"manage-header\">\n      <el-form label-width=\"auto\" :model=\"searchForm.formData\"\n               :inline=\"true\" size=\"mini\">\n        <el-form-item label=\"姓名\" prop=\"name\">\n          <el-input\n            placeholder=\"请输入姓名\"\n            v-model.trim=\"searchForm.formData.name\"\n            prefix-icon=\"el-icon-search\"\n          />\n        </el-form-item>\n        <el-form-item label=\"生日\" prop=\"birthday\">\n          <el-date-picker\n            type=\"date\"\n            value-format=\"yyyy-MM-dd\"\n            placeholder=\"请选择起始日期\"\n            v-model=\"searchForm.formData.birthday\"\n          />\n        </el-form-item>\n        <el-form-item label=\"部门\" prop=\"deptId\">\n          <el-select\n            placeholder=\"请选择部门\"\n            v-model=\"searchForm.formData.deptId\"\n          >\n            <el-option\n              v-for=\"option in searchForm.deptList\"\n              :key=\"option.id\"\n              :label=\"option.name\"\n              :value=\"option.id\"\n              :disabled=\"option.disabled\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"状态\" prop=\"status\">\n          <el-select\n            placeholder=\"请选择员工状态\"\n            v-model=\"searchForm.formData.status\"\n          >\n            <el-option\n              label=\"正常\"\n              value=\"1\"\n            />\n            <el-option\n              label=\"异常\"\n              value=\"0\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"search\" size=\"mini\">搜索 <i class=\"el-icon-search\"/></el-button>\n          <el-button type=\"danger\" @click=\"reset\" size=\"mini\">重置 <i class=\"el-icon-refresh-left\"/></el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <!---------------------------- 数据表格----------------------------------->\n    <div class=\"common-table\">\n      <el-table\n        :data=\"table.tableData\"\n        height=\"85%\"\n        border\n        stripe\n        row-key=\"id\"\n        :header-cell-style=\"{background: '#eef1f6',color: '#606266',\n        textAlign:'center',fontWeight:'bold',borderWidth:'3px'}\"\n        @selection-change=\"handleSelectionChange\"\n      >\n        <el-table-column type=\"selection\" width=\"50\" align=\"center\"/>\n        <el-table-column prop=\"code\" label=\"工号\" min-width=\"80\" align=\"center\"/>\n        <el-table-column prop=\"name\" label=\"姓名\" min-width=\"80\" align=\"center\"/>\n        <el-table-column prop=\"age\" label=\"年龄\" min-width=\"50\" align=\"center\"/>\n        <el-table-column prop=\"deptName\" label=\"部门\" min-width=\"125\" align=\"center\"/>\n        <el-table-column prop=\"gender\" label=\"性别\" min-width=\"50\" align=\"center\"/>\n        <el-table-column prop=\"phone\" label=\"电话\" min-width=\"125\" align=\"center\"/>\n        <el-table-column prop=\"birthday\" label=\"生日\" min-width=\"125\" align=\"center\"/>\n        <el-table-column label=\"状态\" min-width=\"150\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-switch v-model=\"scope.row.status\" active-color=\"#13ce66\"\n                       inactive-color=\"#ff4949\"\n                       active-text=\"正常\"\n                       inactive-text=\"异常\"\n                       :active-value=\"1\"\n                       :inactive-value=\"0\"\n                       @change=\"handleStatusChange(scope.row)\"\n            ></el-switch>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"address\" label=\"地址\" min-width=\"200\" align=\"center\"/>\n        <el-table-column prop=\"remark\" label=\"备注\" min-width=\"200\" align=\"center\"/>\n        <el-table-column label=\"操作\" width=\"280\" fixed=\"right\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" type=\"primary\" @click=\"handleEdit(scope.row)\"\n            >编辑 <i class=\"el-icon-edit\"></i\n            ></el-button>\n            <el-popconfirm\n              style=\"margin-left:10px;margin-right:10px\"\n              confirm-button-text='确定'\n              cancel-button-text='我再想想'\n              icon=\"el-icon-info\"\n              icon-color=\"red\"\n              title=\"你确定删除吗？\"\n              @confirm=\"handleDelete(scope.row.id)\"\n            >\n              <el-button size=\"mini\" type=\"danger\" slot=\"reference\"\n              >删除 <i class=\"el-icon-remove-outline\"></i\n              ></el-button>\n            </el-popconfirm>\n            <el-button type=\"warning\" @click=\"selectRole(scope.row.id)\">分配角色 <i class=\"el-icon-user-solid\"/>\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        class=\"pager\"\n        layout=\"total,sizes,prev,pager,next,jumper\"\n        :page-size=\"table.pageConfig.size ? table.pageConfig.size : 10\"\n        :page-sizes=\"[5, 10, 15, 20]\"\n        :total=\"table.pageConfig.total\"\n        :current-page.sync=\"table.pageConfig.current\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n      ></el-pagination>\n    </div>\n  </div>\n</template>\n<script>\nimport {\n  add,\n  deleteBatch,\n  deleteOne,\n  edit,\n  getExportApi,\n  getImportApi,\n  getList,\n  getRole,\n  setRole\n} from '../../../api/staff'\n\nimport { getAll } from '../../../api/role'\n\nimport { getAllDept } from '../../../api/dept'\nimport { mapState } from 'vuex'\n\nexport default {\n  name: 'Staff',\n  data () {\n    return {\n      dialogForm: {\n        type: 'add', // add为新增，edit为编辑\n        isShow: false,\n        deptList: [],\n        formData: {}\n      },\n      searchForm: {\n        deptList: [],\n        formData: {}\n      },\n      roleDialog: {\n        isShow: false,\n        roleData: [],\n        checkedData: []\n      },\n      table: {\n        tableData: [],\n        pageConfig: {\n          total: 10, // 记录总数\n          current: 1, // 起始页\n          size: 10 // 每页展示的记录数\n        }\n      },\n      ids: [],\n      staffId: 0, // 默认为0\n      subDeptList: []\n    }\n  },\n  computed: {\n    ...mapState('token', ['token']),\n    headers () {\n      return { token: this.token }\n    },\n    // 获取导入数据的接口\n    importApi () {\n      return getImportApi()\n    }\n  },\n  methods: {\n    getDept () {\n      // 获取所有部门\n      getAllDept().then(response => {\n        const list = []\n        response.data.forEach(dept => {\n          if (dept.children.length > 0) {\n            dept.disabled = true\n            list.push(dept)\n            dept.children.forEach(subDept => {\n              list.push(subDept)\n            })\n          }\n        })\n        this.dialogForm.deptList = list\n      })\n    },\n    // 点击新增按钮，弹出对话框\n    handleAdd () {\n      this.dialogForm.isShow = true\n      this.dialogForm.type = 'add'\n      this.dialogForm.formData = {}\n      this.getDept()\n    },\n    handleDelete (id) {\n      deleteOne(id).then(\n        response => {\n          if (response.code === 200) {\n            this.$message.success('删除成功！')\n            this.loading()\n          } else {\n            this.$message.error('删除失败！')\n          }\n        }\n      )\n    },\n    handleDeleteBatch () {\n      deleteBatch(this.ids).then(response => {\n        if (response.code === 200) {\n          this.$message.success('批量删除成功！')\n          this.loading()\n        } else {\n          this.$message.error('批量删除失败！')\n        }\n      })\n    },\n    handleEdit (row) {\n      this.dialogForm.isShow = true\n      this.dialogForm.type = 'edit'\n      this.dialogForm.formData = row\n      this.getDept()\n    },\n    confirm () {\n      // 通过type来判断是新增还是编辑\n      if (this.dialogForm.type === 'add') {\n        add(this.dialogForm.formData).then((response) => {\n          if (response.code === 200) {\n            this.$message.success('添加成功！')\n            this.dialogForm.isShow = false\n            this.loading()\n          } else {\n            this.$message.error('添加失败！')\n          }\n        })\n      } else {\n        edit(this.dialogForm.formData).then((response) => {\n          if (response.code === 200) {\n            this.$message.success('修改成功！')\n            this.dialogForm.isShow = false\n            this.loading()\n          } else {\n            this.$message.error('修改失败！')\n          }\n        })\n      }\n    },\n    search () {\n      this.loading()\n    },\n    // 重置搜索表单\n    reset () {\n      this.searchForm.formData = {}\n      this.loading()\n    },\n    handleSizeChange (size) {\n      this.table.pageConfig.size = size\n      this.loading()\n    },\n    handleCurrentChange (current) {\n      this.table.pageConfig.current = current\n      this.loading()\n    },\n    handleSelectionChange (list) {\n      this.ids = list.map(item => item.id)\n    },\n    handleStatusChange (row) {\n      edit(row)\n    },\n    // 加载数据\n    loading () {\n      getAllDept().then(response => {\n        const list = []\n        response.data.forEach(dept => {\n          if (dept.children.length > 0) {\n            dept.disabled = true\n            list.push(dept)\n            dept.children.forEach(subDept => {\n              list.push(subDept)\n            })\n          }\n        })\n        this.searchForm.deptList = list\n      })\n      getList({\n        current: this.table.pageConfig.current,\n        size: this.table.pageConfig.size\n      }, this.searchForm.formData).then(response => {\n        if (response.code === 200) {\n          this.table.tableData = response.data.list\n          this.table.pageConfig.total = response.data.total\n        } else {\n          this.$message.error(response.message)\n        }\n      })\n    },\n    // 导出数据\n    exportData () {\n      window.open(getExportApi())\n    },\n    handleImportSuccess (response) {\n      if (response.code === 200) {\n        this.$message.success('数据导入成功！')\n        this.loading()\n      } else {\n        this.$message.error('数据导入失败！')\n      }\n    },\n    selectRole (id) {\n      this.staffId = id\n      this.roleDialog.isShow = true\n      getAll().then(response => {\n        if (response.code === 200) {\n          this.roleDialog.roleData = response.data\n        } else {\n          this.$message.error('获取角色数据失败！')\n        }\n      })\n      getRole(this.staffId).then(\n        response => {\n          if (response.code === 200) {\n            this.roleDialog.checkedData = response.data.map(item => item.roleId)\n          } else {\n            this.$message.error('获取数据失败！')\n          }\n        }\n      )\n    },\n    handleSetRole () {\n      setRole(this.staffId, this.roleDialog.checkedData).then(\n        response => {\n          if (response.code === 200) {\n            this.roleDialog.isShow = false\n            this.$message.success('角色分配成功！')\n          } else {\n            this.$message.error('角色分配失败！')\n          }\n        }\n      )\n    }\n  },\n  created () {\n    this.loading()\n  }\n}\n</script>\n"],"mappings":"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"}]}