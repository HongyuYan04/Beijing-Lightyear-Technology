(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e2f218a"],{"0d26":function(t,e,a){"use strict";var r=a("e330"),o=Error,i=r("".replace),n=function(t){return String(new o(t).stack)}("zxcasd"),l=/\n\s*at [^:]*:[^\n]*/,s=l.test(n);t.exports=function(t,e){if(s&&"string"==typeof t&&!o.prepareStackTrace)while(e--)t=i(t,l,"");return t}},1787:function(t,e,a){"use strict";var r=a("861d");t.exports=function(t){return r(t)||null===t}},"2ba4":function(t,e,a){"use strict";var r=a("40d5"),o=Function.prototype,i=o.apply,n=o.call;t.exports="object"==typeof Reflect&&Reflect.apply||(r?n.bind(i):function(){return n.apply(i,arguments)})},"3bbe":function(t,e,a){"use strict";var r=a("1787"),o=String,i=TypeError;t.exports=function(t){if(r(t))return t;throw new i("Can't set "+o(t)+" as a prototype")}},"577e":function(t,e,a){"use strict";var r=a("f5df"),o=String;t.exports=function(t){if("Symbol"===r(t))throw new TypeError("Cannot convert a Symbol value to a string");return o(t)}},"6f19":function(t,e,a){"use strict";var r=a("9112"),o=a("0d26"),i=a("b980"),n=Error.captureStackTrace;t.exports=function(t,e,a,l){i&&(n?n(t,e):r(t,"stack",o(a,l)))}},"6f25":function(t,e,a){},7156:function(t,e,a){"use strict";var r=a("1626"),o=a("861d"),i=a("d2bb");t.exports=function(t,e,a){var n,l;return i&&r(n=e.constructor)&&n!==a&&o(l=n.prototype)&&l!==a.prototype&&i(t,l),t}},7282:function(t,e,a){"use strict";var r=a("e330"),o=a("59ed");t.exports=function(t,e,a){try{return r(o(Object.getOwnPropertyDescriptor(t,e)[a]))}catch(i){}}},ab36:function(t,e,a){"use strict";var r=a("861d"),o=a("9112");t.exports=function(t,e){r(e)&&"cause"in e&&o(t,"cause",e.cause)}},aeb0:function(t,e,a){"use strict";var r=a("9bf2").f;t.exports=function(t,e,a){a in t||r(t,a,{configurable:!0,get:function(){return e[a]},set:function(t){e[a]=t}})}},b980:function(t,e,a){"use strict";var r=a("d039"),o=a("5c6c");t.exports=!r((function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",o(1,7)),7!==t.stack)}))},bed0:function(t,e,a){"use strict";a("6f25")},c9c3:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"manage"},[e("el-dialog",{attrs:{title:"工资",visible:t.dialogForm.isShow},on:{"update:visible":function(e){return t.$set(t.dialogForm,"isShow",e)}}},[e("el-form",{ref:"dialogForm",attrs:{"label-width":"150px",size:"mini",model:t.dialogForm.formData,rules:t.dialogForm.rules}},[e("el-form-item",{attrs:{label:"基本工资",prop:"baseSalary"}},[e("el-input-number",{staticStyle:{width:"48%"},attrs:{min:0,precision:3},model:{value:t.dialogForm.formData.baseSalary,callback:function(e){t.$set(t.dialogForm.formData,"baseSalary",e)},expression:"dialogForm.formData.baseSalary"}})],1),e("el-form-item",{attrs:{label:"生活补贴",prop:"subsidy"}},[e("el-input-number",{staticStyle:{width:"48%"},attrs:{min:0,precision:3},model:{value:t.dialogForm.formData.subsidy,callback:function(e){t.$set(t.dialogForm.formData,"subsidy",e)},expression:"dialogForm.formData.subsidy"}})],1),e("el-form-item",{attrs:{label:"奖金",prop:"bonus"}},[e("el-input-number",{staticStyle:{width:"48%"},attrs:{min:0,precision:3},model:{value:t.dialogForm.formData.bonus,callback:function(e){t.$set(t.dialogForm.formData,"bonus",e)},expression:"dialogForm.formData.bonus"}})],1),e("el-form-item",{staticStyle:{height:"80px"},attrs:{label:"扣款"}},[e("el-form-item",{staticStyle:{height:"30px"}},[e("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:"迟到","label-width":"60px"}},[e("el-input-number",{attrs:{disabled:!0,controls:!1,precision:3},model:{value:t.dialogForm.formData.lateDeduct,callback:function(e){t.$set(t.dialogForm.formData,"lateDeduct",e)},expression:"dialogForm.formData.lateDeduct"}})],1),e("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:"早退","label-width":"80px"}},[e("el-input-number",{attrs:{disabled:!0,controls:!1,precision:3},model:{value:t.dialogForm.formData.leaveEarlyDeduct,callback:function(e){t.$set(t.dialogForm.formData,"leaveEarlyDeduct",e)},expression:"dialogForm.formData.leaveEarlyDeduct"}})],1)],1),e("el-form-item",{staticStyle:{height:"30px"}},[e("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:"旷工","label-width":"60px"}},[e("el-input-number",{attrs:{disabled:!0,controls:!1,precision:3},model:{value:t.dialogForm.formData.absenteeismDeduct,callback:function(e){t.$set(t.dialogForm.formData,"absenteeismDeduct",e)},expression:"dialogForm.formData.absenteeismDeduct"}})],1),e("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:"请假","label-width":"80px"}},[e("el-input-number",{attrs:{disabled:!0,controls:!1,precision:3},model:{value:t.dialogForm.formData.leaveDeduct,callback:function(e){t.$set(t.dialogForm.formData,"leaveDeduct",e)},expression:"dialogForm.formData.leaveDeduct"}})],1)],1)],1),e("el-form-item",{staticStyle:{height:"30px"},attrs:{label:"缴费"}},[e("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:"社保","label-width":"60px"}},[e("el-input-number",{attrs:{disabled:!0,controls:!1,precision:3},model:{value:t.insurance.perSocialPay,callback:function(e){t.$set(t.insurance,"perSocialPay",e)},expression:"insurance.perSocialPay"}})],1),e("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:"公积金","label-width":"80px"}},[e("el-input-number",{attrs:{disabled:!0,controls:!1,precision:3},model:{value:t.insurance.perHousePay,callback:function(e){t.$set(t.insurance,"perHousePay",e)},expression:"insurance.perHousePay"}})],1)],1),e("el-form-item",{attrs:{label:"最终工资",prop:"totalSalary"}},[e("el-input-number",{staticStyle:{width:"48%"},attrs:{disabled:!0,controls:!1,precision:3},model:{value:t.dialogForm.formData.totalSalary,callback:function(e){t.$set(t.dialogForm.formData,"totalSalary",e)},expression:"dialogForm.formData.totalSalary"}})],1),e("el-form-item",{attrs:{label:"备注"}},[e("el-input",{staticStyle:{width:"48%"},attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},maxlength:"100","show-word-limit":""},model:{value:t.dialogForm.formData.remark,callback:function(e){t.$set(t.dialogForm.formData,"remark","string"===typeof e?e.trim():e)},expression:"dialogForm.formData.remark"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogForm.isShow=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确定")])],1)],1),e("div",{staticStyle:{"margin-bottom":"10px"}},[e("el-upload",{staticStyle:{display:"inline-block"},attrs:{action:t.importApi,headers:t.headers,accept:"xlsx","show-file-list":!1,"on-success":t.handleImportSuccess,multiple:!1}},[e("el-button",{attrs:{type:"success",size:"mini"}},[t._v("导入 "),e("i",{staticClass:"el-icon-bottom"})])],1),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning",size:"mini"},on:{click:t.exportData}},[t._v("导出 "),e("i",{staticClass:"el-icon-top"})])],1),e("div",{staticClass:"manage-header"},[e("el-form",{attrs:{"label-width":"auto",model:t.searchForm.formData,inline:!0,size:"mini"}},[e("el-form-item",{attrs:{label:"姓名",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入姓名","prefix-icon":"el-icon-search"},model:{value:t.searchForm.formData.name,callback:function(e){t.$set(t.searchForm.formData,"name","string"===typeof e?e.trim():e)},expression:"searchForm.formData.name"}})],1),e("el-form-item",{attrs:{label:"部门",prop:"deptId"}},[e("el-select",{attrs:{placeholder:"请选择部门"},model:{value:t.searchForm.formData.deptId,callback:function(e){t.$set(t.searchForm.formData,"deptId",e)},expression:"searchForm.formData.deptId"}},t._l(t.searchForm.deptList,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:t.disabled}})})),1)],1),e("el-form-item",{attrs:{label:"月份",prop:"month"}},[e("el-date-picker",{attrs:{"value-format":"yyyyMM",type:"month",placeholder:"请选择月份"},model:{value:t.searchForm.formData.month,callback:function(e){t.$set(t.searchForm.formData,"month",e)},expression:"searchForm.formData.month"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.search}},[t._v("搜索 "),e("i",{staticClass:"el-icon-search"})]),e("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.reset}},[t._v("重置 "),e("i",{staticClass:"el-icon-refresh-left"})])],1)],1)],1),e("div",{staticClass:"common-table"},[e("el-table",{attrs:{data:t.table.tableData,height:"85%",border:"",stripe:"","row-key":"id","header-cell-style":{background:"#eef1f6",color:"#606266",textAlign:"center",fontWeight:"bold",borderWidth:"3px"}}},[e("el-table-column",{attrs:{prop:"code",label:"工号","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"name",label:"姓名","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"deptName",label:"部门","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"phone",label:"电话","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{label:"扣款项目"}},[e("el-table-column",{attrs:{prop:"lateDeduct",label:"迟到","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"leaveEarlyDeduct",label:"早退","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"absenteeismDeduct",label:"旷工","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"leaveDeduct",label:"请假","min-width":"125",align:"center"}})],1),e("el-table-column",{attrs:{label:"缴纳项目"}},[e("el-table-column",{attrs:{prop:"housePay",label:"公积金","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"socialPay",label:"社保","min-width":"125",align:"center"}})],1),e("el-table-column",{attrs:{label:"实发工资"}},[e("el-table-column",{attrs:{prop:"baseSalary",label:"基础工资","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"subsidy",label:"生活补贴","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"bonus",label:"奖金","min-width":"125",align:"center"}})],1),e("el-table-column",{attrs:{prop:"totalSalary",label:"最终工资","min-width":"125",align:"center"}}),e("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"200",align:"center"}}),e("el-table-column",{attrs:{label:"操作",width:"190",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.handleEdit(a.row)}}},[t._v("明细 "),e("i",{staticClass:"el-icon-edit"})])]}}])})],1),e("el-pagination",{staticClass:"pager",attrs:{layout:"total,sizes,prev,pager,next,jumper","page-size":t.table.pageConfig.size?t.table.pageConfig.size:10,"page-sizes":[5,10,15,20],total:t.table.pageConfig.total,"current-page":t.table.pageConfig.current},on:{"update:currentPage":function(e){return t.$set(t.table.pageConfig,"current",e)},"update:current-page":function(e){return t.$set(t.table.pageConfig,"current",e)},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},o=[],i=(a("d9e2"),a("14d9"),a("e9f5"),a("7d54"),a("b775"));const n="/salary",l=t=>Object(i["a"])({url:n,method:"get",params:t}),s=t=>Object(i["a"])({url:n+"/set",method:"post",data:t}),c=()=>"http://localhost:8888"+n+"/import",u=t=>"http://localhost:8888"+n+"/export/"+t;var m=a("f13d"),d=a("2f62"),p=a("fe05"),f={name:"Salary",data(){const t=(t,e,a)=>{this.dialogForm.formData.totalSalary<0?a(new Error("最终工资至少应该大于0")):a()};return{searchForm:{deptList:[],formData:{}},dialogForm:{isShow:!1,formData:{},rules:{baseSalary:[{required:!0,message:"请输入基础工资",trigger:"blur"},{validator:t,trigger:"blur"}]}},table:{tableData:[],pageConfig:{total:10,current:1,size:10}},month:"",insurance:{}}},computed:{...Object(d["b"])("token",["token"]),headers(){return{token:this.token}},importApi(){return c()}},watch:{"dialogForm.formData.baseSalary":function(){this.calculateSalary()},"dialogForm.formData.subsidy":function(){this.calculateSalary()},"dialogForm.formData.bonus":function(){this.calculateSalary()}},methods:{calculateSalary(){this.dialogForm.formData.totalSalary=this.dialogForm.formData.baseSalary+this.dialogForm.formData.subsidy+this.dialogForm.formData.bonus-this.insurance.perHousePay-this.insurance.perSocialPay-this.dialogForm.formData.lateDeduct-this.dialogForm.formData.leaveEarlyDeduct-this.dialogForm.formData.leaveDeduct-this.dialogForm.formData.absenteeismDeduct},handleEdit(t){Object(m["c"])(t.staffId).then(e=>{200===e.code?(this.insurance=e.data,this.dialogForm.isShow=!0,this.dialogForm.formData={staffId:t.staffId,baseSalary:t.baseSalary,subsidy:t.subsidy,bonus:t.bonus,month:this.month,lateDeduct:t.lateDeduct,leaveDeduct:t.leaveDeduct,leaveEarlyDeduct:t.leaveEarlyDeduct,absenteeismDeduct:t.absenteeismDeduct,remark:t.remark}):this.$message.error("请先为此员工设置社保！")})},confirm(){this.$refs.dialogForm.validate(t=>{if(!t)return!1;s(this.dialogForm.formData).then(t=>{200===t.code?(this.$message.success("保存成功"),this.dialogForm.isShow=!1,this.loading()):this.$message.error("保存失败")})})},handleSizeChange(t){this.table.pageConfig.size=t,this.loading()},handleCurrentChange(t){this.table.pageConfig.current=t,this.loading()},search(){this.loading()},reset(){this.searchForm.formData={},this.loading()},loading(){Object(p["e"])().then(t=>{const e=[];t.data.forEach(t=>{t.children.length>0&&(t.disabled=!0,e.push(t),t.children.forEach(t=>{e.push(t)}))}),this.searchForm.deptList=e}),l({current:this.table.pageConfig.current,size:this.table.pageConfig.size,name:this.searchForm.formData.name,deptId:this.searchForm.formData.deptId,month:this.searchForm.formData.month}).then(t=>{200===t.code?(this.table.tableData=t.data.list,this.table.pageConfig.total=t.data.total,this.month=t.data.month):this.$message.error(t.message)})},exportData(){window.open(u(this.month))},handleImportSuccess(t){200===t.code?(this.$message.success("数据导入成功！"),this.loading()):this.$message.error("数据导入失败！")}},created(){this.loading()}},b=f,h=(a("bed0"),a("2877")),g=Object(h["a"])(b,r,o,!1,null,"32d4b959",null);e["default"]=g.exports},d2bb:function(t,e,a){"use strict";var r=a("7282"),o=a("861d"),i=a("1d80"),n=a("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,a={};try{t=r(Object.prototype,"__proto__","set"),t(a,[]),e=a instanceof Array}catch(l){}return function(a,r){return i(a),n(r),o(a)?(e?t(a,r):a.__proto__=r,a):a}}():void 0)},d9e2:function(t,e,a){"use strict";var r=a("23e7"),o=a("cfe9"),i=a("2ba4"),n=a("e5cb"),l="WebAssembly",s=o[l],c=7!==new Error("e",{cause:7}).cause,u=function(t,e){var a={};a[t]=n(t,e,c),r({global:!0,constructor:!0,arity:1,forced:c},a)},m=function(t,e){if(s&&s[t]){var a={};a[t]=n(l+"."+t,e,c),r({target:l,stat:!0,constructor:!0,arity:1,forced:c},a)}};u("Error",(function(t){return function(e){return i(t,this,arguments)}})),u("EvalError",(function(t){return function(e){return i(t,this,arguments)}})),u("RangeError",(function(t){return function(e){return i(t,this,arguments)}})),u("ReferenceError",(function(t){return function(e){return i(t,this,arguments)}})),u("SyntaxError",(function(t){return function(e){return i(t,this,arguments)}})),u("TypeError",(function(t){return function(e){return i(t,this,arguments)}})),u("URIError",(function(t){return function(e){return i(t,this,arguments)}})),m("CompileError",(function(t){return function(e){return i(t,this,arguments)}})),m("LinkError",(function(t){return function(e){return i(t,this,arguments)}})),m("RuntimeError",(function(t){return function(e){return i(t,this,arguments)}}))},e391:function(t,e,a){"use strict";var r=a("577e");t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:r(t)}},e5cb:function(t,e,a){"use strict";var r=a("d066"),o=a("1a2d"),i=a("9112"),n=a("3a9b"),l=a("d2bb"),s=a("e893"),c=a("aeb0"),u=a("7156"),m=a("e391"),d=a("ab36"),p=a("6f19"),f=a("83ab"),b=a("c430");t.exports=function(t,e,a,h){var g="stackTraceLimit",y=h?2:1,D=t.split("."),v=D[D.length-1],F=r.apply(null,D);if(F){var w=F.prototype;if(!b&&o(w,"cause")&&delete w.cause,!a)return F;var S=r("Error"),x=e((function(t,e){var a=m(h?e:t,void 0),r=h?new F(t):new F;return void 0!==a&&i(r,"message",a),p(r,x,r.stack,2),this&&n(w,this)&&u(r,this,x),arguments.length>y&&d(r,arguments[y]),r}));if(x.prototype=w,"Error"!==v?l?l(x,S):s(x,S,{name:!0}):f&&g in F&&(c(x,F,g),c(x,F,"prepareStackTrace")),s(x,F),!b)try{w.name!==v&&i(w,"name",v),w.constructor=x}catch(k){}return x}}},f13d:function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return n})),a.d(e,"c",(function(){return l})),a.d(e,"f",(function(){return s})),a.d(e,"b",(function(){return c})),a.d(e,"a",(function(){return u}));var r=a("b775");const o="/insurance",i=(t,e)=>Object(r["a"])({url:o+"/page",method:"post",params:t,data:e}),n=t=>Object(r["a"])({url:o+"/"+t}),l=t=>Object(r["a"])({url:o+"/staff/"+t}),s=t=>Object(r["a"])({url:o+"/set",method:"post",data:t}),c=()=>"http://localhost:8888"+o+"/import",u=()=>"http://localhost:8888"+o+"/export"},fe05:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return s})),a.d(e,"h",(function(){return c})),a.d(e,"e",(function(){return u})),a.d(e,"g",(function(){return m})),a.d(e,"f",(function(){return d}));var r=a("b775");const o="/dept",i=t=>Object(r["a"])({url:o,method:"post",data:t}),n=t=>Object(r["a"])({url:o+"/"+t,method:"delete"}),l=t=>Object(r["a"])({url:o+"/batch/"+t,method:"delete"}),s=t=>Object(r["a"])({url:o,method:"put",data:t}),c=t=>Object(r["a"])({url:o,method:"get",params:t}),u=()=>Object(r["a"])({url:o+"/all"}),m=()=>"http://localhost:8888"+o+"/import",d=()=>"http://localhost:8888"+o+"/export"}}]);
//# sourceMappingURL=chunk-1e2f218a.cca4216c.js.map