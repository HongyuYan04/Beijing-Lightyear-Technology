{"version":3,"sources":["webpack:///./src/api/staffLeave.js","webpack:///./src/views/attendance/leave/index.vue","webpack:///src/views/attendance/leave/index.vue","webpack:///./src/views/attendance/leave/index.vue?606c","webpack:///./src/views/attendance/leave/index.vue?6caa","webpack:///./src/views/attendance/leave/index.vue?edbe","webpack:///./src/api/dept.js"],"names":["url","add","data","request","method","deleteOne","id","edit","getList","params","getListByStaffId","getUnauditedByStaffId","getImportApi","getExportApi","render","_vm","this","_c","_self","staticClass","staticStyle","attrs","importApi","headers","handleImportSuccess","_v","on","exportData","searchForm","formData","model","value","name","callback","$$v","$set","trim","expression","deptId","_l","deptList","option","key","disabled","search","reset","table","tableData","background","color","textAlign","fontWeight","borderWidth","scopedSlots","_u","fn","scope","row","tagType","_s","staffLeave","status","unaudited","$event","approve","reject","pageConfig","size","total","current","handleSizeChange","handleCurrentChange","staticRenderFns","computed","mapState","token","methods","then","response","code","loading","$message","success","error","getAllDept","list","forEach","dept","children","length","push","subDept","message","window","open","created","component","deleteBatch","ids"],"mappings":"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","file":"js/chunk-db2babb8.1910deeb.js","sourcesContent":["import request from '../utils/request'\n\nconst url = '/staff-leave'\n\n/**\n * 添加\n * @param data\n * @returns {AxiosPromise}\n */\nexport const add = (data) => {\n  return request({\n    url: url, method: 'post', data\n  })\n}\n\n/**\n * 逻辑删除\n * @param id\n * @returns {AxiosPromise}\n */\nexport const deleteOne = (id) => {\n  return request({\n    url: url + '/' + id, method: 'delete'\n  })\n}\n\nexport const deleteBatch = (ids) => {\n  return request({\n    url: url + '/batch/' + ids, method: 'delete'\n  })\n}\n\nexport const edit = (data) => {\n  return request({\n    url: url, method: 'put', data\n  })\n}\n\nexport const getList = (params) => {\n  return request({\n    url: url, method: 'get', params\n  })\n}\n\nexport const getListByStaffId = (params) => {\n  return request({\n    url: url + '/staff', method: 'get', params\n  })\n}\n\nexport const getUnauditedByStaffId = (id) => {\n  return request({\n    url: url + '/staff/' + id, method: 'get'\n  })\n}\n\n// 获得所有\nexport const getAll = () => {\n  return request({\n    url: url + '/all'\n  })\n}\n\n// 数据导入\nexport const getImportApi = () => {\n  return 'http://localhost:' + process.env.VUE_APP_PORT + url + '/import'\n}\n\n// 数据导出\nexport const getExportApi = () => {\n  return 'http://localhost:' + process.env.VUE_APP_PORT + url + '/export'\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"manage\"},[_c('div',{staticStyle:{\"margin-bottom\":\"10px\"}},[_c('el-upload',{staticStyle:{\"display\":\"inline-block\"},attrs:{\"action\":_vm.importApi,\"headers\":_vm.headers,\"accept\":\"xlsx\",\"show-file-list\":false,\"on-success\":_vm.handleImportSuccess,\"multiple\":false}},[_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"mini\"}},[_vm._v(\"导入 \"),_c('i',{staticClass:\"el-icon-bottom\"})])],1),_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"warning\",\"size\":\"mini\"},on:{\"click\":_vm.exportData}},[_vm._v(\"导出 \"),_c('i',{staticClass:\"el-icon-top\"})])],1),_c('div',{staticClass:\"manage-header\"},[_c('el-form',{attrs:{\"label-width\":\"auto\",\"model\":_vm.searchForm.formData,\"inline\":true,\"size\":\"mini\"}},[_c('el-form-item',{attrs:{\"label\":\"姓名\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入姓名\",\"prefix-icon\":\"el-icon-search\"},model:{value:(_vm.searchForm.formData.name),callback:function ($$v) {_vm.$set(_vm.searchForm.formData, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"searchForm.formData.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"部门\",\"prop\":\"deptId\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择部门\"},model:{value:(_vm.searchForm.formData.deptId),callback:function ($$v) {_vm.$set(_vm.searchForm.formData, \"deptId\", $$v)},expression:\"searchForm.formData.deptId\"}},_vm._l((_vm.searchForm.deptList),function(option){return _c('el-option',{key:option.id,attrs:{\"label\":option.name,\"value\":option.id,\"disabled\":option.disabled}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.search}},[_vm._v(\"搜索 \"),_c('i',{staticClass:\"el-icon-search\"})]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":_vm.reset}},[_vm._v(\"重置 \"),_c('i',{staticClass:\"el-icon-refresh-left\"})])],1)],1)],1),_c('div',{staticClass:\"common-table\"},[_c('el-table',{attrs:{\"data\":_vm.table.tableData,\"height\":\"85%\",\"border\":\"\",\"stripe\":\"\",\"row-key\":\"id\",\"header-cell-style\":{background: '#eef1f6',color: '#606266',\n      textAlign:'center',fontWeight:'bold',borderWidth:'3px'}}},[_c('el-table-column',{attrs:{\"prop\":\"staffLeave.code\",\"label\":\"工号\",\"min-width\":\"80\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"staffLeave.name\",\"label\":\"姓名\",\"min-width\":\"80\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"staffLeave.deptName\",\"label\":\"部门\",\"min-width\":\"125\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"staffLeave.phone\",\"label\":\"电话\",\"min-width\":\"125\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"staffLeave.createTime\",\"label\":\"申请时间\",\"min-width\":\"180\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"staffLeave.typeNum\",\"label\":\"类型\",\"min-width\":\"125\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"staffLeave.startDate\",\"label\":\"开始日期\",\"min-width\":\"125\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"prop\":\"staffLeave.days\",\"label\":\"天数\",\"min-width\":\"80\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"审核状态\",\"min-width\":\"85\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"type\":scope.row.tagType}},[_vm._v(_vm._s(scope.row.staffLeave.status))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"备注\",\"width\":\"200\",\"prop\":\"staffLeave.remark\",\"align\":\"center\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"190\",\"fixed\":\"right\",\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"disabled\":scope.row.staffLeave.status!==scope.row.unaudited},on:{\"click\":function($event){return _vm.approve(scope.row)}}},[_vm._v(\"批准 \"),_c('i',{staticClass:\"el-icon-check\"})]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\",\"disabled\":scope.row.staffLeave.status!==scope.row.unaudited},on:{\"click\":function($event){return _vm.reject(scope.row)}}},[_vm._v(\"驳回 \"),_c('i',{staticClass:\"el-icon-close\"})])]}}])})],1),_c('el-pagination',{staticClass:\"pager\",attrs:{\"layout\":\"total,sizes,prev,pager,next,jumper\",\"page-size\":_vm.table.pageConfig.size ? _vm.table.pageConfig.size : 10,\"page-sizes\":[5, 10, 15, 20],\"total\":_vm.table.pageConfig.total,\"current-page\":_vm.table.pageConfig.current},on:{\"update:currentPage\":function($event){return _vm.$set(_vm.table.pageConfig, \"current\", $event)},\"update:current-page\":function($event){return _vm.$set(_vm.table.pageConfig, \"current\", $event)},\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"manage\">\n\n    <!--操作-->\n    <div style=\"margin-bottom: 10px\">\n      <el-upload :action=\"importApi\" :headers=\"headers\" accept=\"xlsx\" :show-file-list=\"false\"\n                 :on-success=\"handleImportSuccess\" :multiple=\"false\"\n                 style=\"display:inline-block\">\n        <el-button type=\"success\" size=\"mini\"\n        >导入 <i class=\"el-icon-bottom\"></i>\n        </el-button>\n      </el-upload>\n      <el-button type=\"warning\" size=\"mini\" @click=\"exportData\" style=\"margin-left: 10px\"\n      >导出 <i class=\"el-icon-top\"></i>\n      </el-button>\n    </div>\n\n    <!------------------------- 搜索 -------------------------------->\n    <div class=\"manage-header\">\n      <el-form label-width=\"auto\" :model=\"searchForm.formData\"\n               :inline=\"true\" size=\"mini\">\n        <el-form-item label=\"姓名\" prop=\"name\">\n          <el-input\n            placeholder=\"请输入姓名\"\n            v-model.trim=\"searchForm.formData.name\"\n            prefix-icon=\"el-icon-search\"\n          />\n        </el-form-item>\n        <el-form-item label=\"部门\" prop=\"deptId\">\n          <el-select\n            placeholder=\"请选择部门\"\n            v-model=\"searchForm.formData.deptId\"\n          >\n            <el-option\n              v-for=\"option in searchForm.deptList\"\n              :key=\"option.id\"\n              :label=\"option.name\"\n              :value=\"option.id\"\n              :disabled=\"option.disabled\"\n            />\n          </el-select>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"search\" size=\"mini\">搜索 <i class=\"el-icon-search\"/></el-button>\n          <el-button type=\"danger\" @click=\"reset\" size=\"mini\">重置 <i class=\"el-icon-refresh-left\"/></el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n    <!------------------------ 数据表格 ----------------------->\n    <div class=\"common-table\">\n      <el-table\n        :data=\"table.tableData\"\n        height=\"85%\"\n        border\n        stripe\n        row-key=\"id\"\n        :header-cell-style=\"{background: '#eef1f6',color: '#606266',\n        textAlign:'center',fontWeight:'bold',borderWidth:'3px'}\"\n      >\n        <el-table-column prop=\"staffLeave.code\" label=\"工号\" min-width=\"80\" align=\"center\"/>\n        <el-table-column prop=\"staffLeave.name\" label=\"姓名\" min-width=\"80\" align=\"center\"/>\n        <el-table-column prop=\"staffLeave.deptName\" label=\"部门\" min-width=\"125\" align=\"center\"/>\n        <el-table-column prop=\"staffLeave.phone\" label=\"电话\" min-width=\"125\" align=\"center\"/>\n        <el-table-column prop=\"staffLeave.createTime\" label=\"申请时间\" min-width=\"180\" align=\"center\"/>\n        <el-table-column prop=\"staffLeave.typeNum\" label=\"类型\" min-width=\"125\" align=\"center\"/>\n        <el-table-column prop=\"staffLeave.startDate\" label=\"开始日期\" min-width=\"125\" align=\"center\"/>\n        <el-table-column prop=\"staffLeave.days\" label=\"天数\" min-width=\"80\" align=\"center\"/>\n        <el-table-column label=\"审核状态\" min-width=\"85\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-tag :type=\"scope.row.tagType\">{{ scope.row.staffLeave.status }}</el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"备注\" width=\"200\" prop=\"staffLeave.remark\" align=\"center\"/>\n        <el-table-column label=\"操作\" width=\"190\" fixed=\"right\" align=\"center\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" type=\"primary\" @click=\"approve(scope.row)\"\n                       :disabled=\"scope.row.staffLeave.status!==scope.row.unaudited\"\n            >批准 <i class=\"el-icon-check\"></i\n            ></el-button>\n            <el-button size=\"mini\" type=\"danger\" @click=\"reject(scope.row)\"\n                       :disabled=\"scope.row.staffLeave.status!==scope.row.unaudited\"\n            >驳回 <i class=\"el-icon-close\"></i\n            ></el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      <el-pagination\n        class=\"pager\"\n        layout=\"total,sizes,prev,pager,next,jumper\"\n        :page-size=\"table.pageConfig.size ? table.pageConfig.size : 10\"\n        :page-sizes=\"[5, 10, 15, 20]\"\n        :total=\"table.pageConfig.total\"\n        :current-page.sync=\"table.pageConfig.current\"\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n      ></el-pagination>\n    </div>\n  </div>\n</template>\n<script>\nimport { edit, getExportApi, getImportApi, getList } from '../../../api/staffLeave'\nimport { mapState } from 'vuex'\nimport { getAllDept } from '@/api/dept'\n\nexport default {\n  name: 'Leave',\n  data () {\n    return {\n      searchForm: {\n        deptList: [],\n        formData: {}\n      },\n      table: {\n        tableData: [],\n        pageConfig: {\n          total: 10, // 记录总数\n          current: 1, // 起始页\n          size: 10 // 每页展示的记录数\n        }\n      }\n    }\n  },\n  computed: {\n    ...mapState('token', ['token']),\n    headers () {\n      return { token: this.token }\n    },\n    // 获取导入数据的接口\n    importApi () {\n      return getImportApi()\n    }\n\n  },\n  methods: {\n    approve (row) {\n      // 通过\n      row.staffLeave.status = row.approve\n      edit(row.staffLeave).then(response => {\n        if (response.code === 200) {\n          this.loading()\n          this.$message.success('审批通过')\n        }\n      })\n    },\n    reject (row) {\n      row.staffLeave.status = row.reject\n      edit(row.staffLeave).then(response => {\n        if (response.code === 200) {\n          this.loading()\n          this.$message.error('驳回')\n        }\n      })\n    },\n    handleSizeChange (size) {\n      this.table.pageConfig.size = size\n      this.loading()\n    },\n    handleCurrentChange (current) {\n      this.table.pageConfig.current = current\n      this.loading()\n    },\n    search () {\n      this.loading()\n    },\n    // 重置搜索表单\n    reset () {\n      this.searchForm.formData = {}\n      this.loading()\n    },\n    // 将数据渲染到模板\n    loading () {\n      getAllDept().then(response => {\n        const list = []\n        response.data.forEach(dept => {\n          if (dept.children.length > 0) {\n            dept.disabled = true\n            list.push(dept)\n            dept.children.forEach(subDept => {\n              list.push(subDept)\n            })\n          }\n        })\n        this.searchForm.deptList = list\n      })\n      getList({\n        current: this.table.pageConfig.current,\n        size: this.table.pageConfig.size,\n        name: this.searchForm.formData.name,\n        deptId: this.searchForm.formData.deptId\n      }).then(response => {\n        if (response.code === 200) {\n          this.table.tableData = response.data.list\n          this.table.pageConfig.total = response.data.total\n        } else {\n          this.$message.error(response.message)\n        }\n      })\n    },\n    // 导出数据\n    exportData () {\n      window.open(getExportApi())\n    },\n    handleImportSuccess (response) {\n      if (response.code === 200) {\n        this.$message.success('数据导入成功！')\n        this.loading()\n      } else {\n        this.$message.error('数据导入失败！')\n      }\n    }\n  },\n  created () {\n    this.loading()\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.common-table {\n  height: calc(100% - 62px);\n  background-color: white;\n  position: relative;\n\n  .pager {\n    position: absolute;\n    bottom: 20px;\n    right: 20px;\n  }\n}\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=316cc948&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=316cc948&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"316cc948\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=316cc948&prod&lang=less&scoped=true\"","import request from '../utils/request'\n\nconst url = '/dept'\n/**\n * 添加\n * @param data\n * @returns {AxiosPromise}\n */\nexport const add = (data) => {\n  return request({\n    url: url,\n    method: 'post',\n    data\n  })\n}\n\n/**\n * 逻辑删除\n * @param id\n * @returns {AxiosPromise}\n */\nexport const deleteOne = (id) => {\n  return request({\n    url: url + '/' + id,\n    method: 'delete'\n  })\n}\n\nexport const deleteBatch = (ids) => {\n  return request({\n    url: url + '/batch/' + ids,\n    method: 'delete'\n  })\n}\n\nexport const edit = (data) => {\n  return request({\n    url: url,\n    method: 'put',\n    data\n  })\n}\n\n// 分页条件查询\nexport const getList = (params) => {\n  return request({\n    url: url,\n    method: 'get',\n    params\n  })\n}\n\n// 查询所有\nexport const getAllDept = () => {\n  return request({\n    url: url + '/all'\n  })\n}\n\n// 得到一条数据\nexport const getOne = (id) => {\n  return request({\n    url: url + '/' + id\n  })\n}\n\n// 数据导入\nexport const getImportApi = () => {\n  return 'http://localhost:' + process.env.VUE_APP_PORT + url + '/import'\n}\n\n// 数据导出\nexport const getExportApi = () => {\n  return 'http://localhost:' + process.env.VUE_APP_PORT + url + '/export'\n}\n"],"sourceRoot":""}