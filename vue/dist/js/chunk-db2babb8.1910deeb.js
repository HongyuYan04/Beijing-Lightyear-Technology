(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-db2babb8"],{"7b8b":function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return l})),a.d(t,"f",(function(){return o})),a.d(t,"g",(function(){return c})),a.d(t,"h",(function(){return d})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return p}));var r=a("b775");const n="/staff-leave",s=e=>Object(r["a"])({url:n,method:"post",data:e}),i=e=>Object(r["a"])({url:n+"/"+e,method:"delete"}),l=e=>Object(r["a"])({url:n,method:"put",data:e}),o=e=>Object(r["a"])({url:n,method:"get",params:e}),c=e=>Object(r["a"])({url:n+"/staff",method:"get",params:e}),d=e=>Object(r["a"])({url:n+"/staff/"+e,method:"get"}),u=()=>"http://localhost:8888"+n+"/import",p=()=>"http://localhost:8888"+n+"/export"},b484:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"manage"},[t("div",{staticStyle:{"margin-bottom":"10px"}},[t("el-upload",{staticStyle:{display:"inline-block"},attrs:{action:e.importApi,headers:e.headers,accept:"xlsx","show-file-list":!1,"on-success":e.handleImportSuccess,multiple:!1}},[t("el-button",{attrs:{type:"success",size:"mini"}},[e._v("导入 "),t("i",{staticClass:"el-icon-bottom"})])],1),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"warning",size:"mini"},on:{click:e.exportData}},[e._v("导出 "),t("i",{staticClass:"el-icon-top"})])],1),t("div",{staticClass:"manage-header"},[t("el-form",{attrs:{"label-width":"auto",model:e.searchForm.formData,inline:!0,size:"mini"}},[t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{attrs:{placeholder:"请输入姓名","prefix-icon":"el-icon-search"},model:{value:e.searchForm.formData.name,callback:function(t){e.$set(e.searchForm.formData,"name","string"===typeof t?t.trim():t)},expression:"searchForm.formData.name"}})],1),t("el-form-item",{attrs:{label:"部门",prop:"deptId"}},[t("el-select",{attrs:{placeholder:"请选择部门"},model:{value:e.searchForm.formData.deptId,callback:function(t){e.$set(e.searchForm.formData,"deptId",t)},expression:"searchForm.formData.deptId"}},e._l(e.searchForm.deptList,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id,disabled:e.disabled}})})),1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("搜索 "),t("i",{staticClass:"el-icon-search"})]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.reset}},[e._v("重置 "),t("i",{staticClass:"el-icon-refresh-left"})])],1)],1)],1),t("div",{staticClass:"common-table"},[t("el-table",{attrs:{data:e.table.tableData,height:"85%",border:"",stripe:"","row-key":"id","header-cell-style":{background:"#eef1f6",color:"#606266",textAlign:"center",fontWeight:"bold",borderWidth:"3px"}}},[t("el-table-column",{attrs:{prop:"staffLeave.code",label:"工号","min-width":"80",align:"center"}}),t("el-table-column",{attrs:{prop:"staffLeave.name",label:"姓名","min-width":"80",align:"center"}}),t("el-table-column",{attrs:{prop:"staffLeave.deptName",label:"部门","min-width":"125",align:"center"}}),t("el-table-column",{attrs:{prop:"staffLeave.phone",label:"电话","min-width":"125",align:"center"}}),t("el-table-column",{attrs:{prop:"staffLeave.createTime",label:"申请时间","min-width":"180",align:"center"}}),t("el-table-column",{attrs:{prop:"staffLeave.typeNum",label:"类型","min-width":"125",align:"center"}}),t("el-table-column",{attrs:{prop:"staffLeave.startDate",label:"开始日期","min-width":"125",align:"center"}}),t("el-table-column",{attrs:{prop:"staffLeave.days",label:"天数","min-width":"80",align:"center"}}),t("el-table-column",{attrs:{label:"审核状态","min-width":"85",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:a.row.tagType}},[e._v(e._s(a.row.staffLeave.status))])]}}])}),t("el-table-column",{attrs:{label:"备注",width:"200",prop:"staffLeave.remark",align:"center"}}),t("el-table-column",{attrs:{label:"操作",width:"190",fixed:"right",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini",type:"primary",disabled:a.row.staffLeave.status!==a.row.unaudited},on:{click:function(t){return e.approve(a.row)}}},[e._v("批准 "),t("i",{staticClass:"el-icon-check"})]),t("el-button",{attrs:{size:"mini",type:"danger",disabled:a.row.staffLeave.status!==a.row.unaudited},on:{click:function(t){return e.reject(a.row)}}},[e._v("驳回 "),t("i",{staticClass:"el-icon-close"})])]}}])})],1),t("el-pagination",{staticClass:"pager",attrs:{layout:"total,sizes,prev,pager,next,jumper","page-size":e.table.pageConfig.size?e.table.pageConfig.size:10,"page-sizes":[5,10,15,20],total:e.table.pageConfig.total,"current-page":e.table.pageConfig.current},on:{"update:currentPage":function(t){return e.$set(e.table.pageConfig,"current",t)},"update:current-page":function(t){return e.$set(e.table.pageConfig,"current",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},n=[],s=(a("14d9"),a("e9f5"),a("7d54"),a("7b8b")),i=a("2f62"),l=a("fe05"),o={name:"Leave",data(){return{searchForm:{deptList:[],formData:{}},table:{tableData:[],pageConfig:{total:10,current:1,size:10}}}},computed:{...Object(i["b"])("token",["token"]),headers(){return{token:this.token}},importApi(){return Object(s["e"])()}},methods:{approve(e){e.staffLeave.status=e.approve,Object(s["c"])(e.staffLeave).then(e=>{200===e.code&&(this.loading(),this.$message.success("审批通过"))})},reject(e){e.staffLeave.status=e.reject,Object(s["c"])(e.staffLeave).then(e=>{200===e.code&&(this.loading(),this.$message.error("驳回"))})},handleSizeChange(e){this.table.pageConfig.size=e,this.loading()},handleCurrentChange(e){this.table.pageConfig.current=e,this.loading()},search(){this.loading()},reset(){this.searchForm.formData={},this.loading()},loading(){Object(l["e"])().then(e=>{const t=[];e.data.forEach(e=>{e.children.length>0&&(e.disabled=!0,t.push(e),e.children.forEach(e=>{t.push(e)}))}),this.searchForm.deptList=t}),Object(s["f"])({current:this.table.pageConfig.current,size:this.table.pageConfig.size,name:this.searchForm.formData.name,deptId:this.searchForm.formData.deptId}).then(e=>{200===e.code?(this.table.tableData=e.data.list,this.table.pageConfig.total=e.data.total):this.$message.error(e.message)})},exportData(){window.open(Object(s["d"])())},handleImportSuccess(e){200===e.code?(this.$message.success("数据导入成功！"),this.loading()):this.$message.error("数据导入失败！")}},created(){this.loading()}},c=o,d=(a("c6f8"),a("2877")),u=Object(d["a"])(c,r,n,!1,null,"316cc948",null);t["default"]=u.exports},b931:function(e,t,a){},c6f8:function(e,t,a){"use strict";a("b931")},fe05:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return o})),a.d(t,"h",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"g",(function(){return u})),a.d(t,"f",(function(){return p}));var r=a("b775");const n="/dept",s=e=>Object(r["a"])({url:n,method:"post",data:e}),i=e=>Object(r["a"])({url:n+"/"+e,method:"delete"}),l=e=>Object(r["a"])({url:n+"/batch/"+e,method:"delete"}),o=e=>Object(r["a"])({url:n,method:"put",data:e}),c=e=>Object(r["a"])({url:n,method:"get",params:e}),d=()=>Object(r["a"])({url:n+"/all"}),u=()=>"http://localhost:8888"+n+"/import",p=()=>"http://localhost:8888"+n+"/export"}}]);
//# sourceMappingURL=chunk-db2babb8.1910deeb.js.map